<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Sonntag, April 22, 2012, 2:56  -->
<!-- MuClient version 4.75 -->

<!-- Plugin "avalon" generated by Plugin Wizard -->

<muclient>
<plugin
   name="avalon"
   author="Magician, Dranor, Chiaray"
   id="02dade4f6131c8d67e85c7ee"
   language="Lua"
   save_state="n"
   date_written="2014-02-07 09:28:30"
   requires="4.70"
   version="2.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="* hat damit * Punkte erreicht und gewonnen!"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/loose.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du hast * Punkte erreicht und damit gewonnen. Herzlichen Glueckwunsch!"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/win.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Damit ist dieses Spiel beendet."
   send_to="12"
   sequence="95"
  >
  <send>world.EnableGroup("Spiele_Hajo",0)</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match=".* scheint etwas unaufmerksam gewesen zu sein.*|Du bist etwas unaufmerksam und bemerkst nicht.*"
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/dicefail.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du kannst in diesem 2. Zug nichts herauslegen *"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/secondturn.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match=".* bekommt insgesamt .* Punkte gutgeschrieben. Der Joker.*|Du bekommst insgesamt .* Punkte gutgeschrieben. Du hattest.*"
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/writejoker.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du setzt Deinen Joker\.|.* setzt seinen Joker\."
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/joker.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du konntest auch nach drei Zuegen noch keine Punkte machen\.|.* konnte auch nach drei Zuegen noch keine Punkte machen\."
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/nowrite.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Nun bist Du an der Reihe."
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/yourturn.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du bekommst insgesamt .* Punkte gutgeschrieben\.|.* bekommt insgesamt .* Punkte gutgeschrieben\."
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/write.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du konntest mit allen rausgelegten Wuerfeln Punkte machen .*|.* konnte alle Wuerfel rauslegen und hat nun aufs neue 3 Zuege.*"
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/again.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du legst .* raus\.|.* legt .* raus\."
   regexp="y"
   send_to="12"
   sequence="94"
  >
  <send>psnd("Games/Hajo/collect.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du wuerfelst .*|.* wuerfelt .*"
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Games/Hajo/dice.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Alle angegebenen Spieler sind da, also kann's ja losgehen."
   send_to="12"
   sequence="95"
  >
  <send>world.EnableGroup("Spiele_Hajo",1)</send>
  </trigger>
  <trigger
   enabled="y"
   match="Es wurden * Gegenstaende geladen."
   send_to="12"
   sequence="95"
  >
  <send>OnAvalonLogin()</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Fuehler fangen an zu blitzen, und darauf fangen sie an in einem"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/BallStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ueber Deinem Kopf entsteht eine gleissend helle Energiekugel, um deren"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/BallCreate.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Energiekugel schiesst los und fliegt direkt auf *"
   send_to="12"
   sequence="99"
  >
  <send>psnd("Febracim/Ball.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du konzentrierst Dich auf * waehrend*"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/TailStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du schiesst einen Feuerschweif auf *"
   send_to="12"
   sequence="99"
  >
  <send>psnd("Febracim/Tail.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du starrst * an, waehrend*"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ShockStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Vibration uebertraegt sich immer staerker werdend auf Deinen gesamten"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ShockCharge.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Schockwelle breitet sich aus, und fliegt in Richtung*"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/Shock.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Als Du * mit Deinen gelben Augen*"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/Devour.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du Sprichst laut die Worte: Febra mestasa. Kurz darauf oeffnet sich gleich"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberOpen.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Mit einem langsamen Knirschen schliesst sich die Luke ueber Dir. Was hat"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberClose.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Langsam beginnt sich der Raum mit einer Fluessigkeit zu fuellen."
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberFill1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Boden unter Dir ist schon gar nicht mehr zu erkennen, und Du merkst,"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberFill1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Fluessigkeit steigt immer weiter. Panik will in Dir aufkommen. Der"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberFill2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du bist nun voellig von Dieser Fluessigkeit umgeben. Deine Lungen fuellen"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberLungs.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Febracim entspannt sich und geniesst das Bad in dieser seltsamen"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberFill2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du gewoehnst Dich langsam an das Einatmen der Fluessigkeit statt der"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberStretch.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Febracim scheint sich zu Strecken und fuehlt sich scheinbar richtig"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberStretch.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Febracim heilt sich langsam."
   send_to="12"
   sequence="100"
  >
  <send>psnd("Febracim/ChamberHeal.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du bekommst wieder Boden unter den Fuessen."
   send_to="12"
   sequence="99"
  >
  <send>psnd("Febracim/ChamberStop.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Mit einem Knirschen an der Decke oeffnet sich die Luke wieder. Der Febracim"
   send_to="12"
   sequence="99"
  >
  <send>psnd("Febracim/ChamberOpen.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du streckst Deine Arme gen Himmel und *"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/Stardust1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Zwischen Deinen Haenden entsteht eine leuchtende Kugel,*"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/Stardust2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Kugel zerspringt mit einem lauten Knall*"
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/Stardust3.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wirst von Sternenstaub umgeben."
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/StardustOn.ogg")
        aura_add("Sternenstaub")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein Sternenstaub loest sich auf."
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/StardustOff.ogg")
        aura_remove("Sternenstaub")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Verwende alten Koerper..."
   send_to="12"
   sequence="95"
  >
  <send>OnAvalonLogin()</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst Deine regenerativen Energien anzuzapfen."
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/MagicCharge1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spuerst, wie die Energien Dir zur Verfuegung stehen."
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/MagicCharge2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hast einen Teil Deiner regenerativen Energien in Deine Zauber umgelenkt."
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/MagicChargeOn.ogg")
        aura_add("Magieaufladung")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Energien fliessen wieder normal."
   send_to="12"
   sequence="95"
  >
  <send>psnd("Spells/MagicChargeOff.ogg")
        aura_remove("Magieaufladung")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ploetzlich bildet sich eine dicke Wolke ueber Deinem Kopf."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/WaterAura2.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein Staubschleier loest sich auf."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/EarthAuraOff.ogg')
        aura_remove('Erdaura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hebst Deine Haende, beschreibst einen Halbkreis.*|Die Partikel verdichten sich um Dich."
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/EarthAuraOn.ogg')
        aura_add('Erdaura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Aus der Erde loesen sich kleine Partikel*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/EarthAura2.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hebst beide Arme, drehst die Handflaechen gen Boden*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/EarthAura1.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Watteflocken loesen sich auf."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/AirAuraOff.ogg')
        aura_remove('Luftaura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du bist in den Watteflocken kaum noch auszumachen."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/AirAuraOn.ogg')
        aura_add('Luftaura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst, aus dem Wattebausch kleine Flocken*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/AirAura2.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du ziehst einen Wattebausch aus Deinem Gepaeck*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/AirAura1.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein Wasserschleier loest sich auf."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/WaterAuraOff.ogg')
        aura_remove('Wasseraura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Es regnet aus der Wolke auf Dich herab*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/WaterAuraOn.ogg')
        aura_add('Wasseraura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beschreibst mit Deinen Haenden mystische Zeichen."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/WaterAura1.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Todesaura loest sich auf."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/DeathAuraOff.ogg')
        aura_remove('Todesaura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du senkst Deine Haende, aber der Schutz der schwarzen Schleier.*|Die schwarzen Schleier verdichten sich um Dich."
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/DeathAuraOn.ogg')
        aura_add('Todesaura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Zwischen Deinen Handflaechen bilden sich schwarze Schleier*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/DeathAura1.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Feueraura loest sich auf."
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/FireAuraOff.ogg')
        aura_remove('Feueraura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du senkst Deine Haende, aber der Schutz der Manawolken.*|Die Manawolken verdichten sich um Dich."
   send_to="12"
   regexp="y"
   sequence="95"
  >
  <send>psnd('Spells/FireAuraOn.ogg')
        aura_add('Feueraura')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Zwischen Deinen Handflaechen bilden sich Manawolken*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/FireAura2.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du streckst beide Handflaechen von Dir und beginnst*"
   send_to="12"
   sequence="95"
  >
  <send>psnd('Spells/FireAura1.ogg')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wirst von einer heiligen Aura umgeben."
   send_to="12"
   sequence="95"
  >
  <send>aura_add('Kampfbeschwoerung')</send>
  </trigger>
  <trigger
   enabled="y"
   match="In einem unkonzentrierten Moment kommst Du ins Trudeln *"
   sequence="100"
   send_to="12"
  >
  <send>speedwalk_breaklegs()</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du kannst Deine Beine wieder bewegen."
   sequence="100"
   send_to="12"
  >
  <send>speedwalk_break()</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ploetzlich erscheint eine grosse Welle, und Du verschluckst Wasser. *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Drown1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du konzentriest Dich auf *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemConcentrate.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du versuchst * telepathisch einen Befehl zu geben."
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemCommunicate.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Augen von * blitzen kurz auf."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send></send>
  </trigger>
  <trigger
   enabled="y"
   match="* trifft * mit seiner Faust. Gleichzeitig *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemManaPunch.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* magischer Schutzschild loest sich auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemShieldOff.ogg")
        aura_remove('Golemschutzschild')</send>
  </trigger>
  <trigger
   enabled="y"
   match="* umgibt ein magischer Schutzschild."
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemShield.ogg")
        aura_add('Golemschutzschild')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das Glitzern legt sich als schuetzendes Schild ueber Dich."
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/CoreShieldCreate.ogg")
        aura_add('Kernschild')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du konzentriest Dich."
   sequence="100"
   send_to="12"
  >
  <send>psnd("spells/Prepare.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du nimmst Deinen Energiekern in die Hand und *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/CoreShieldAbsorb.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das Leuchten Deines Energiekerns laesst nach, waehrend Du *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/CoreShieldShine.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein Kernschild loest sich auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/CoreShieldBreak.ogg")
        aura_remove('Kernschild')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du suchst an * nach Rissen und anderen Macken."
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemHealSearch.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Schnell verschliesst Du die Wunden des Golems. Dabei murmelst Du *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemHealFix.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* sieht schon viel besser aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("GolemCultists/GolemHealFinish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du schluckst noch mehr Wasser."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Drown2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beruhigst Dich wieder."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Drown3.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Du kletterst nach .*$|^.* klettert nach .*$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/Climb/"..math.random(1,11)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Robe schmiegt sich eng an Deinen Koerper.*"
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/Zwonirobe.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Nynaeves Sonnenschein&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Sun.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Rosarios Tanzlied&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Dance.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Rumbolds Ruhe&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Quietness.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Eine Stimmung der Ruhe und Friedfertigkeit benebelt alle Gegner."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/QuietnessOn.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* kann sich langsam vom beruhigenden *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/QuietnessOff.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Wallenroths Wut&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Rage1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Bewegungen werden zusehends schneller."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Rage2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Kaum hast Du aufgehoert zu spielen, bewegt sich wieder alles in seiner"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/RageOver.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Die Lichtwesen von * scheinen Dein Mana etwas aufzufrischen.$|^Bei jeder Beruehrung teilen Lichtwesen ihr Mana mit Dir. $"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Sun_Regen.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Dolores' Euphorie&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Euphoria.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hast keine magische Kraft mehr, die Du in das Lied*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/OutOfSpellPower.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match=".*Fast sofort flackert im Ofen ein heisses|Feuerchen auf."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/MeltBegin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Mist. Noch immer nichts gefunden."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/HammerFailed.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match=".*Sie ist noch ganz gut zu erkennen.*|.*Sie ist noch ausreichend zu erkennen.*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/QuiteGood.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du haertest den Rohling wieder und wieder, damit er spaeter den magischen|Energien beim Gravieren standhalten kann."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Harden.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Mit Deinem Schmiedehammer und einem kleinen Stichel ziehst Du die Zeichnung|der Rune auf .* nach."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Hammer1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du springst in die Fluten."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/EnterWater.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du verlaesst das Wasser."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/ExitWater.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Mit dem Messer in der Hand machst Du Dich an die Arbeit."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Disembowel2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst magische Rituale auszufuehren."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/ShieldRituals.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match=".*Du befreist Dich von Deiner Steinhaut.*|.*Deine Steinhaut loest sich auf.*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/StoneskinOver.ogg")
      aura_remove('Steinhaut')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das hat Deiner Steinhaut den letzten Rest gegeben, sie loest sich auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/StoneskinBreak.ogg")
      aura_remove('Steinhaut')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du murmelst Beschwoerungsformeln. Staub und kleine Steinchen .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/StoneskinStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Eine graue Schicht ueberzieht langsam Deine Haut, die .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/StoneskinContinue.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du bist nun vollkommen in eine Steinhaut eingehuellt, .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/StoneskinFinish.ogg")
      aura_add('Steinhaut')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du verdrehst die Augen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/ShieldConcentrate.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wirst von einem magischen Schild umgeben*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/ShieldOn.ogg")
      aura_add('Schild')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein * loest sich auf."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/ShieldOff.ogg")
      aura_remove('Schild')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hast erfolgreich .* in .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/EngraveFinish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Mit einem lauten Knall laesst .* Schmiedehammer .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/hammer1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hast es geschafft, * faellt um*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopComplete.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Na bitte, das sieht doch schon fast wie ein fertiges Lederstueck aus."
   sequence="100"
   omit_from_output="y"
   send_to="12"
  >
  <send>psnd("Tan/Finish2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hoerst auf, * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Stop.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hoerst auf, * zu singen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Stop_Vocal.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Tue beendet."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/Done.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Viel fehlt Dir nicht mehr zum fertigen Lederstueck."
   sequence="100"
   omit_from_output="y"
   send_to="12"
  >
  <send>psnd("Tan/Finish1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Von der .*rune .*|Schliesslich ist von der .*rune nichts mehr uebrig."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/RuneGone.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Vorsichtig polierst Du * noch etwas..."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Polish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Was? Wie? Wo? Haeh?!? Das habe ich nicht verstanden."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/noway.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Renfields Wirrsal&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Confusion.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, * auszubessern."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/RepairStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="(.*) heilige Aura loest sich auf.|Die heilige Aura von (.*) loest sich auf."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/KB_Out.ogg")
      kb_out("%1")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, * zu schmieden."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/start.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Auf * lodert eine kleine Flamme kurz auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Flame.ogg")</send>
  </trigger>
  <trigger
   match="Du faengst an, .* auf .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/FileStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Du schwimmst nach .*$|^Du treibst mit der Stroemung nach .*$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/Swim/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Auf den Tintagelschen Aeckern.|Ein kleines Huegelland."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/Ground/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, .* in .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/EngraveStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Auf einem Pfad von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Noch ein paar Feinkorrekturen, sonst wirkt die Rune am Ende gar nicht wie|sie soll!"
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/EngraveCorrect.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Auf einer Eisscholle,.*|In einer Eiswueste.*"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/ice/"..math.random(1,1)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hoerst ein lautes Klacken und daraufhin ein Quietschen. Jetzt faellt|wohl gleich ein Klumpen Metall aus dem Rohr."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/MeltClick.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Nur unter Aufbietung aller Kraefte gelingt es Dir, den Hebel bis fast ganz|nach unten zu ziehen."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/PressContinue.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du kniest nieder und suchst den Boden nach Spuren ab."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Track/Begin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="OK, Du verfolgst nun *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/HuntStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du knotest Dir ein *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Hiker/Knot.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein * ist wieder getrocknet."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Hiker/Dry.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Oh Mist, jetzt bist Du auf Granit gestossen und kannst nicht weitergraben!"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigGranite.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du kommst dabei heftig ins Schwitzen."
   sequence="100"
   omit_from_output="y"
   send_to="12"
  >
  <send>psnd("Tan/Breath.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Schliesslich bist Du der Meinung, die Rune nicht weiter nachziehen zu"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/FileEnd.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du kommst ins Schwitzen, es ist ganz schoen anstrengend, mit so einem|grossen Hammer so fein dosierte Schlaege auf den Stichel auszufuehren."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Hammer2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Weiter kannst Du * nicht ausbessern."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/RepairEnd.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein Weg, er verlaeuft von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Unter dem Pfad der Unterwelt. Er fuehrt nach * und *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wanderst auf einem Pfad auf der Insel Holbytla entlang. Er fuehrt nach *, * und *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2, %3</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Du beginnst Dich zu konzentrieren.$|^^.* beginnt sich zu konzentrieren.$|^Du beginnst Deinen Zauberspruch vorzubereiten.$"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/Prepare.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wanderst auf einem Pfad auf der Insel Holbytla entlang. Er fuehrt von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du versuchst Dich darauf zu konzentrieren, versagst jedoch klaeglich."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/Fail.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das riecht aber lecker."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Smell.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Du erhebst .*angriff.*$|^.* erhebt .*angriff.*$|^.* greift .* mit .* an.$|^.*Angriff auf.*$"
   ignore_case="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Weapons/CounterAttack.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das sieht nicht besonders ergiebig aus."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/CoalFail.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, eine Wasserstelle zu graben."
   sequence="100"
   send_to="12"
  >
  <send>psnd("WateringPlace/Begin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein Lichtbogen verschwindet."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/light3out.ogg")
      aura_remove('Licht')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein grosser Lichtbogen breitet sich ueber Deinem Kopf aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/light3b.ogg")
      aura_add('Licht')
      atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, mit * zu faellen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopBegin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   lines_to_match="2"
   match=".*, die Duesterklinge fluestert zu Dir: "
   multi_line="y"
   omit_from_output="y"
   regexp="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der .* Luftvortex scheint sehr stark zu sein.|Der .* Luftvortex scheint wieder etwas schneller zu wirbeln."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Monsters/Vortex/Strong.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner Funke springt auf die Holzspaene ueber und *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Succeed.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Aus der Schmelze ist ein Rumpeln zu hoeren. Irgendetwas tut sich da drin."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/MeltRumble.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du feilst vorsichtig die Raender der .* auf .*|Kraftvoll schleifst Du die .* von .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/File.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Boden vibriert heftig und ein ohrenbetaeubendes Rumpeln und Krachen|ertoent von irgendwo in der Mine. Das muss ein heftiger Einsturz gewesen|sein, hoffentlich ist niemand dabei zu Schaden gekommen."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigCaveInDistant.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Avalon! Eine Welt, in der alles moeglich und nichts unmoeglich ist."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/start.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du folgst * nach *."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Hunt.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Behutsam verteilst Du die Erde am Rand und klopfst sie fest*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("WateringPlace/Prepare.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du fuehrst *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Weapons/sword_draw.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Calidus, der Wandervogel."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/Calidus.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Schon * eine Macke weniger."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/Repair1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Da gehts nicht weiter."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/Wall.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du konzentrierst Dich auf das vorzeitige Ende des Zaubers."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/Stop.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Schweissueberstroemt begutachtest Du Dein fertiges Lederstueck *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Tan/Finish3.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du kramst einen kleinen Feuerstein hervor *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Start.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Sie erzittert immer oefter."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopHit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du landest einen gezielten Schlag auf Deinem Rohling."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/hammer2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="So langsam nimmt Dein Rohling Form an."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/hammer2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du loeschst.*|.*loescht.*|.*erlischt."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/torch_out.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Feuerkugel erlischt."
   sequence="99"
   send_to="12"
  >
  <send>psnd("Misc/torch_out.ogg")
      aura_remove('Licht')</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Leuchtflamme erlischt."
   sequence="99"
   send_to="12"
  >
  <send>psnd("Misc/torch_out.ogg")
      aura_remove('Licht')</send>
  </trigger>
  <trigger
   enabled="y"
   match="So, das duerfte weit genug sein. Gleich mal schaun, ob sich die Arbeit auch|gelohnt hat."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigFinish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du machst Dein * noch einmal richtig nass."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Hiker/Moisten.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Du faengst an, .* zu essen.$|^Mhmmm, schmeckt das gut ...$|^. o Keine Frage, ein Genuss! o . $|^Du geniesst diese Speise in vollen Zuegen.$"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Eat.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="aufgeschichtete Holzpyramide wieder in sich zusammenbricht. *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/FailStart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner Funke springt auf die Holzspaene ueber, aber *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/FailSpark.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="einige Meter nach hinten."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/lavahit3.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Feuerkristall leuchtet nun hellrot und strahlt dabei eine unheimliche*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/FireCrystal.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner See."
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/swim/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="erhaertet."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/lavahit4.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Nebel loest sich allmaehlich auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/FogOut.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner Wasserschwall schwappt von Deinem *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Wave.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Aeste des Lagerfeuers knacken und einige Funken steigen auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Sparks.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein kurzer Blick in die Pfanne verraet Dir, *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Pan.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Erde unter Dir beginnt zu beben."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Portal/quake.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein letzter pruefender Blick und Du erkennst, dass sich bereits Wasser *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("WateringPlace/Succeed.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Daraufhin stellst Du den Topf auf das Kochgestell *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Cook.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Flammen des Lagerfeuers flackern und tanzen hypnotisierend *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Crackle.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Daraufhin stellst Du die Pfanne mit *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Roast.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das Knistern des Feuers wirkt irgendwie beruhigend auf Dich."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Crackle.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das Lagerfeuer ist nun voellig niedergebrannt und erlischt.*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/GoOut.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Sogleich bildet sich ein dunkelblauer Nebel ueber dem Topf, *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Fog.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Einige Funken springen von Deinem *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Spark.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Das Ufer eines kleinen Sees.|In den Weiten der Tundra.|In einem steinigen Landesabschnitt."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/stony/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du meinst ein leises Plaetschern zu vernehmen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Plash.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Super! Mit praezisen Schnitten weidest Du * aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/DisembowelSuccess.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Endlich bist Du mit dem Vorzeichnen fertig."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/ChartEnd.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du merkst, dass die Wasserstelle versiegt. *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("WateringPlace/GoOut.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Fast ohne Widerstand senkt sich der Stempel tief in die Presse hinein.*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/PressEmpty.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du merkst, wie vom Ofen allmaehlich eine grosse Hitze ausgeht."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/MeltHeatUp.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Tatsaechlich, Du hast etwas .* gefunden.|Na bitte, da ist schon etwas.|.* Du hast Mithrilerz gefunden."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/HammerSucceeded.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du oeffnest *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/Open.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Tue abgebrochen."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/DoCancel.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du packst Dein Kochgestell aus und stellst es vor Dich hin."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Unpack.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="konzentriert."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/heal.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="tiefen, feurigen Rot-Orange auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/lavahit1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du nimmst einen grossen Schluck *"
   sequence="101"
   send_to="12"
  >
  <send>psnd("Player/EatUp.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein letztes Mal abschmecken und Du bist Dir sicher, dass *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/CookFinish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du nimmst *"
   sequence="102"
   send_to="12"
  >
  <send>psnd("Items/Take.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Illusion einer Granitfaust schiesst aus *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Granite.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die Lichtwesen folgen Dir."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein schwarzes Mondtor steigt aus dem Boden empor."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Portal/create.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du hoerst auf, &quot;Brems Vogellied&quot; zu spielen."
   omit_from_output="y"
   sequence="99"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die Schlangenrune *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Snake.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein seltsames Haus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/Zwoni.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du legst * in das kochende Wasser *"
   sequence="99"
   send_to="12"
  >
  <send>psnd("Cook/Boiling2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Die rote Nebelwolke beginnt sich ploetzlich aufzuloesen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/FogOut.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein tiefer Kratzer in * muss *"
   sequence="100"
   omit_from_output="y"
   send_to="12"
  >
  <send>psnd("Smith/Repair2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dir rutscht Geroell entgegen."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigRocks.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex naehert sich von *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Monsters/Vortex/Appear.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Fertig. Dein Feuerkristall erlischt und Du packst alles wieder ein. *"
   sequence="99"
   send_to="12"
  >
  <send>psnd("Cook/RoastFinish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex wirbelt ein wenig von *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Monsters/Vortex/Swirl1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Funken spruehen bei Deinen Schlaegen auf den harten Fels."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Funken stieben aus dem Lagerfeuer."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Sparks.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du probierst ein bisschen von *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Try.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Gar nicht so einfach."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du pruefst fachmaennisch die Tiefe und beschliesst *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("WateringPlace/Dig2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Geblendet vom herabstroemenden Schweiss kneifst Du Deine Augen in einem*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Tan/Tear.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du ruehrst * um."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Stir.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du sagst: *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/say.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du schabst fleissig weiter."
   sequence="100"
   omit_from_output="y"
   send_to="12"
  >
  <send>psnd("Tan/Scrape2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du befeuchtest Dein *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Hiker/Moisten.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du befreist Dich aus dem Schlamm."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigMud.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Eine Stichflamme schiesst aus *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Fire.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex wuselt flink um *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Monsters/Vortex/Swirl2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst damit, ein Lagerfeuer zu erstellen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Begin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Eine Wasserfontaene schiesst aus *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Flood.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst das Stueck Haut mit dem Gerbermesser abzuschaben."
   sequence="100"
   omit_from_output="y"
   send_to="12"
  >
  <send>psnd("Tan/Scrape1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* erscheint aus dem Mondtor."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Portal/apear.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst mit dem Wuehlen nach *kohle."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/CoalBegin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* erzittert unter den heftigen Hieben."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopHit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Gerade als Du fertig bist den Rand zu befestigen rutscht alles zurueck *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("WateringPlace/Colapse.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* erzittert unter den heftigen Schlaegen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopHit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Hand wieder."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/firebeam4.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Handflaechen beginnen zu leuchten und zu funkeln."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/heal2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du schlaegst Dein Werkzeug in das Gestein."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigTool.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Hier scheint wirklich Mithrilerz im Gestein zu sein."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/HackSucceed2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du schliesst *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/Close.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Himmel und verschwindet dort."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/lavahit2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du schneidest Dir ein Stueck zur Bearbeitung aus Deiner Tierhaut."
   sequence="100"
   omit_from_output="y"
   send_to="12"
  >
  <send>psnd("Tan/Cut.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du senkst *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Weapons/Sword_Sheath.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du setzt * ab."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/offhead.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du zeichnest vorsichtig die Rune auf * vor."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Chart.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du zerteilst * mit * in *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/WoodSplit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* Voegel stuerz* auf * herab.*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Birds_Attack.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du ziehst * an."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Wear.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst mit der Mineraliensuche.|Du beginnst mit der Suche nach Silbererz."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/HammerBegin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Eine kaum ertraegliche Hitze stroemt aus dem Nebel."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Heat.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du ziehst * aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Unwear.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst mit der Suche nach Mithrilerz.|Du beginnst mit der Arbeit. Es ist gar nicht so einfach hier Mithrilerz zu"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/HackSucceed1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Eine kleine freche Fliege will an Dein Essen, *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Fly.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* faellt bestimmt bald um."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopHit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst zu graben."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigBegin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Eine rote Nebelwolke bildet sich ueber dem Boden und umschliesst den*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Fog.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* fluechtet sichtlich verstoert nach *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Monsters/Flee.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du beobachtest ein wenig den Funkenflug des Lagerfeuers."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Sparks.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* geht in dem Lagerfeuer in * auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/burst.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du betrittst ein * Mondtor."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Portal/enter portal.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   group="Player"
   match="* gibt Dir *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Items/Get.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Hm. Viel ist da nicht zu sehen."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/HammerFail.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* hat gut geschmeckt."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/EatUp.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Hoffentlich findet sich etwas.|Das geht ja wirklich gut."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/HammerSucceed.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Hoffentlich wird das was...|Das wird wirklich was..."
   omit_from_output="y"
   regexp="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du setzt * auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/head.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Hoi, das sieht doch schon wie .*kohle aus.|Nach was richtig Ordentlichem sieht das nicht aus."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/CoalSucceed.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spaltest Dein Brennholz in kleinere Scheite."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Split.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Huch, jetzt bist Du tatsaechlich auf einen anderen Stollen gestossen und|faellst prompt hinunter."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigFall.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spielst eine leichte Melodie auf *, mit der Du bei*"
   send_to="12"
   sequence="99"
  >
  <send>psnd("Bard/Grats.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spielst .* auf Deine.*"
   regexp="y"
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Sing.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du singst * ohne instrumentale Unterstuetzung*"
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Sing_Vocal.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spuckst Dir in die Haende."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/light1b.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spuerst, wie die Magie Deiner Waffe Dir die Kraft Deines Feindes"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Vampire.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein Blitz schiesst aus *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Lightning.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du bewegst Deine Haende auf mystische Weise."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/light2a.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du bildest mit dem * Luftvortex eine neue Gruppe."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Monsters/Vortex/Group.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein Feuerstrahl schiesst auf * zu."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/firebeam2.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* kippt bestimmt bald um."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopHit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du breitest Deine Arme aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/light3a.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* knistert in dem Lagerfeuer."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Crackle.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du drueckst den langen Hebel nach oben. Ohne Widerstand folgt er Deiner.*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/PressRelease.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* recht beschaedigt."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/Damaged.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du entzuendest.*|.*entzuendet.*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/torch_on.ogg")
      atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   match="* sagt: *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/say.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="In dem Kochtopf befindet sich jetzt erstaunlicherweise kochendes Wasser *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Boiling1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* schwer beschaedigt."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/HeavyDamaged.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="In einem Stollen.|In einer grossen Hoehle."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/cave/"..math.random(1,4)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="In einer trostlosen Steppe."
   send_to="12"
   sequence="100"
  >
  <send>psnd("Footsteps/Steppy/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du steckst *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Weapons/Sword_Sheath.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Irgendwie hast Du hier ein mulmiges Gefuehl, das Dir sagt.|RAUS HIER.*|Die Waende dieses Stollens knirschen verdaechtig. Es hoert sich so an, als|ob jetzt der richtige Zeitpunkt waere, um die Beine in die Hand zu nehmen.|Nichts wie weg.|Ploetzlich hoerst Du Steineknirschen und ein lautes Rumpeln. Irgendwie sagt|Dir das, dass Du hier schnell weg solltest."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigCaveInAlert.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du stellst die Holzstuecke zu einer kleinen Pyramide auf *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Firestarting/Build.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Kleine Luftblaeschen steigen aus dem Topf auf."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/bubble.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du stimmst eine dunkle, getragene Totenklage *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Burial.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du streckst Deine Hand nach vorn."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/firebeam1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du summst eine kleine Melodie, die Dir gerade so eingefallen ist."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Melody.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein Klumpen Metall faellt scheppernd in das Auffangbecken."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/MeltFinish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du ergreifst die Holzstange ganz am Ende, um einen moeglichst langen Hebel|zu haben, und ziehst sie kraftvoll nach unten."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/PressBegin.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du erzeugst Dir eine kleine Feuerkugel."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/torch_on.ogg")
      aura_add('Licht')
      atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   group="Player"
   ignore_case="y"
   keep_evaluating="y"
   match="^Du legst .*$|^.* legt .* hin.$"
   regexp="y"
   sequence="95"
   send_to="12"
  >
  <send>psnd("Items/Put.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* schwingt immer mehr hin- und her."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopHit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du erzeugst Dir eine kleine Leuchtflamme."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/torch_on.ogg")
      aura_add('Licht')
      atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex hat * getoetet."
   sequence="2"
   send_to="12"
  >
  <send>psnd("Monsters/Vortex/Kill.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* wackelt immer mehr."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/ChopHit.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Auroras Lag&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Lag.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Der Luftvortex loest sich auf als Du ihm seinen Kern geraubt hast.*"
   sequence="2"
   send_to="12"
  >
  <send>psnd("Monsters/Vortex/Disintegrate.ogg")
world.Execute("lege streitaxt in deinen rucksack")</send>
  </trigger>
  <trigger
   enabled="y"
   match="*Gruppe*"
   keep_evaluating="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Misc/group.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Brems Vogellied&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Birds_Start.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match=".* gibt Dir .* (Lapis|Obsidian).*"
   regexp="y"
   sequence="99"
   send_to="12"
  >
  <send>psnd("Items/GetMoney.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="*Sie ist kaum noch zu erkennen*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Rune/Bad.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du gibt Dir die beste Muehe, * zu faellen.*"
   sequence="99"
   send_to="12"
  >
  <send>psnd("Misc/ChopContinue.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Langsam senkt sich der Stempel in die Presse hinein. Du hoerst das|Kreischen sich verformenden Metalls."
   omit_from_output="y"
   regexp="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du gibst *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Items/Give.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Laut scheppernd faellt ein fertiger Rohling unten aus der Presse heraus .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/PressFinish.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du graebst eine tiefe Mulde mit Deinem Hirschfaenger in den Boden."
   sequence="100"
   send_to="12"
  >
  <send>psnd("WateringPlace/Dig1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Leider bist Du viel zu unkonzentriert und verschneidest Dich dermassen oft*"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/DisembowelFail.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du waehlst ein geeignetes Messer aus Deinen Kochutensilien aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Disembowel1.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du graebst und graebst..."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/DigContinue.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Leise ist aus der Schmelzanlage ein Blubbern zu hoeren. Ob das Metall schon| schmilzt."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/MeltBubble.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wendest (das|den|die) .*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Cook/Turn.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du greifst * mit * an."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/Attack.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Mist, mit .* laesst sich hier wohl nichts mehr.*|Mist. Hier laesst sich wohl nichts mehr schuerfen."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/Empty.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wickelst Dein Buendel aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Hiker/Open.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du haelst den Feuerstrahl weiterhin aufrecht."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Spells/firebeam3.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wickelst Dein Buendel sorgfaeltig wieder ein."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Hiker/Close.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wringst Dein feuchtes * kraeftig aus."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Hiker/WringOut.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein Pfad, er verlaeuft von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Fabians Gnade&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Heal.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Grinwells Stimme im Geist&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Hypnosis.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match=".* ist Dir entkommen.|Du brichst die Verfolgung ab."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/HuntAbort.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Josuas Rattenfaengerlied&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Catcher.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match=".* ist fertig.|.* sind fertig."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Smith/complete.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, &quot;Kakos Missklang&quot; auf * zu spielen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Bard/Dissonance.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match=".*Du hast Braunkohle gefunden."
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Mining/CoalSucceeded.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="* schiesst * auf *"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Weapons/arrow.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du kannst nicht mehr genug Deiner magischen Energie entbehren, um Deinen Speer weiterhin damit zu versorgen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/waldtraene/forceend.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spuerst, wie 'Waldtraene' von Deiner magischen Kraft zehrt."
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/waldtraene/sendzp.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du spuerst, wie Deine magische Energie schwindet. Sie scheint sich in|Waldtraene zu sammeln.*"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/waldtraene/startzp.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="'Waldtraene' ist nun voll mit magischer Energie geladen."
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/waldtraene/fullzp.ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Traenen gleich fliessen Tropfen goldenen Lichtes ueber die Blaetter von 'Waldtraene' auf * zu.|Sie scheinen ihm fuerchterliche Schmerzen zu bereiten."
   regexp="y"
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Weapons/waldtraene/"..math.random(1,8)..".ogg")</send>
  </trigger>
<trigger
   match="In einem unkonzentrierten Moment verlierst Du Deinen Halt und rutschst ab."
   sequence="100"
   send_to="12"
   enabled="y"
  >
  <send>speedwalk_breaklegs()</send>
  </trigger>
<trigger
   match="Du findest wieder festen Halt."
   enabled="y"
   sequence="100"
   send_to="12"
  >
  <send>speedwalk_break()</send>
</trigger>
<trigger
   match="'Waldtraene' zittert in Deiner Hand. Du fuerchtest, sie koennte zerbersten!"
   enabled="y"
   sequence="100"
   send_to="12"
  >
  <send>psnd("Player/waldtraene/vibration.ogg")</send>
</trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   match="rausl *"
   group="Spiele_Hajo"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>world.Execute("rauslegen %1")</send>
</alias>
  <alias
   match="pos"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>print_position()</send>
</alias>
  <alias
   match="safespeedwalks_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>safespeedwalks_switch()</send>
</alias>
  <alias
   match="switch_mute"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>switch_mute()</send>
</alias>
  <alias
   match="switch_fullmute"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>switch_fullmute()</send>
</alias>
  <alias
   match="volumetype_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>volumetype_switch()</send>
</alias>
  <alias
   match="spbar_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>spbar_switch()</send>
</alias>
  <alias
   match="apbar_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>apbar_switch()</send>
</alias>
  <alias
   match="tpbar_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>tpbar_switch()</send>
</alias>
  <alias
   match="repeatcommand_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>repeatcommand_switch()</send>
</alias>
  <alias
   match="volume_up"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>volume(5)</send>
</alias>
  <alias
   match="volume_down"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>volume(-5)</send>
</alias>
  <alias
   match="tts_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>tts_switch()</send>
</alias>
  <alias
   match="speedwalk_break"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>speedwalk_break()</send>
</alias>
  <alias
   match="az"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>aura_status()</send>
</alias>
  <alias
   match="^/(.*?)$"
   enabled="y"
   send_to="12"
   sequence="100"
   regexp="y"
  >
  <send>speedwalk_start("%1")</send>
</alias>
  <alias
   match="janis"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Skilletan</send>
  </alias>
  <alias
   match="janiso"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Lorinant</send>
  </alias>
  <alias
   match="janisw"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Tolsgal</send>
  </alias>
  <alias
   match="janiw"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Jerisa</send>
  </alias>
  <alias
   match="foien"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Alotria</send>
  </alias>
  <alias
   match="foieno"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Orkland</send>
  </alias>
  <alias
   match="foienw"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Sanduz</send>
  </alias>
  <alias
   match="foieo"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Abtei</send>
  </alias>
  <alias
   match="foies"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Corona</send>
  </alias>
  <alias
   match="foieso"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Usagor</send>
  </alias>
  <alias
   match="foiesw"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Minias</send>
  </alias>
  <alias
   match="foiew"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Ashar</send>
  </alias>
  <alias
   match="janin"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Unbekannt</send>
  </alias>
  <alias
   match="janino"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Amphibos</send>
  </alias>
  <alias
   match="janinw"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Holbytla</send>
  </alias>
  <alias
   match="janio"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Tintagel</send>
  </alias>
</aliases>

<!--  Script  -->

<script>
<![CDATA[
Audio              = nil
atcp               = nil
Dunkel             = 0
EPKampfStart       = nil
EPStack            = {0}
g_tp               = nil
g_max_tp           = nil
g_sp               = nil
g_max_sp           = nil
g_ap               = nil
g_max_ap           = nil
apfullannounced    = false
spfullannounced    = false
tpfullannounced    = false
hapsnd             = nil
hspnil             = 0
htpsnd             = nil
hmusic             = nil
LastCommand        = nil
LevelUpdate        = false
PlayerEP           = nil
PlayerKill         = false
PlayerLevel        = nil
plugintbl          = {}
plugintbl[1]       = "ATCP.plugin/plugin.xml"
plugintbl[2]       = "LuaAudio.xml"
plugintbl[3]       = "output_functions.xml"
plugintbl[4]       = "omit_blank_lines.xml"
plugintbl[5]       = "channel_history.xml"
plugintbl[6]       = "hyperlink_url2.xml"
RoomID             = nil
RoomName           = ''
volumetype         = 1
require("avalon.speedwalks")
require("avalon.stations")
require("pairsbykeys")
Ini = require("ini")
Path = require("pl.path")
PPI = require("ppi")

function OnAvalonLogin()
  atcp.Send("ava_set_channel 1")
  atcp.Send("ava_set_noinband_channel 1")
  atcp.Send("ava_req_update")
end

OnAvalonGetoetet = function(type, message)
  if (type == "Avalon.Getoetet") then
    psnd("Player/Kill.ogg")
  elseif (type == "Avalon.GruppeGetoetet") then
    psnd("Monsters/Kill.ogg")
  end
  if not EPKampfStart then
    return
  end
  if (PlayerEP - EPKampfStart == 0) then
    return
  end
  i = #EPStack
  cep = EPKampfStart
  repeat
    if (EPStack[i] ~= 10) then
      monsterep = EPStack[i]
      break
    end
    cep = cep + EPStack[i]
    i = i - 1
  until cep == PlayerEP
  if not monsterep then
    monsterep = 10
  end
  world.Note("Dieses Monster gab "..monsterep.." EP.")
  if (EPKampfStart + EPStack[#EPStack] ~= PlayerEP) and (EPKampfStart ~= PlayerEP) then
    extra_ep = PlayerEP - (EPKampfStart + monsterep)
    world.Note("In diesem Kampf wurden zusaetzlich "..extra_ep.." EP erreicht.")
  end
  EPKampfStart = PlayerEP
end

OnAvalonKampf = function(type, message)
  if (message == "1") then
    EPKampfStart = PlayerEP
    PlayerKill = false
  elseif (message == "0") then
    if (PlayerKill == false) and (PlayerEP - EPKampfStart > 0) then
      extra_ep = PlayerEP - EPKampfStart
      world.Note("In diesem Kampf hast Du "..extra_ep.." EP erhalten.")
    end
    EPKampfStart = PlayerEP
  end
end

OnAvalonDunkel = function(type, message)
  Dunkel = tonumber(message)
end

OnAvalonChannel = function(type, message)
  channel, text = string.match(message, "^(%[?%w+%-?%w*%-?%w*%]?) (.*)$")
  if (channel == "magier") or (channel == "hyraskrieger") or (channel == "barden") or (channel == "golemkultisten") or (channel == "druiden") or (channel == "runenschmiede") or (channel == "formwandler") or (channel == "daemonenkrieger") then
    channel="gilde"
  end
  if (Path.exists(GetInfo(67).."Sounds/Channels/"..channel..".ogg")) then
    psnd("Channels/"..channel..".ogg")
  end
  NoteColour(text, 255, 255, 150)
  world.Execute(";history_add "..channel.."="..text)
end

OnAvalonRoomID = function(type, message)
  tmessage = utils.split(message, " ")
  id = tmessage[1]
  name = tmessage[2]
  if tmessage[3] then
    X = tonumber(utils.split(tmessage[3],"=")[2])
  else
    X = nil
  end
  if tmessage[4] then
    Y = tonumber(utils.split(tmessage[4],"=")[2])
  else
    Y = nil
  end
  RoomID = id
  if (not name) or (name == 'Bitte') then
    return
  end
  if (name == RoomName) and (hmusic ~= nil) and (Audio.isPlaying(hmusic) == 1) then
    return
  end
  RoomName = name
  if (not Path.exists(GetInfo(67)..'Sounds/Music/'..name..'.ogg')) then
    stopifplaying(hmusic)
    return
  end
  pmusic(name..'.ogg')
end 

OnAvalonEP = function(message, ep)
  ep = tonumber(ep)
  if PlayerEP and (ep - PlayerEP > 0) then
    EPStack[#EPStack+1] = ep - PlayerEP
  end
  PlayerEP = ep
  if LevelUpdate then
    psnd("Misc/LevelUp.ogg")
    world.Note("Herzlichen Glueckwunsch! Level "..tostring(PlayerLevel).." wurde mit "..tostring(PlayerEP).." EP erreicht. Voraussichtliche EP zu Level "..tostring(PlayerLevel+1)..": "..tostring(round(PlayerEP*1.1145-PlayerEP,0)))
    LevelUpdate = false
  end
end

OnAvalonLevel = function(type, message)
  local level = string.match(message, "^S(%d+)$")
  level = tonumber(level)
  if (PlayerLevel ~= nil) and (level > PlayerLevel) then
    LevelUpdate = true
    atcp.Send('ava_req_update')
  end
  PlayerLevel = level
end

OnAvalonTP = function(message, ntp)
  ntp = tonumber(ntp)
  play_tp(ntp)
  g_tp=ntp
end

OnAvalonSP=function(message, nsp)
  nsp = tonumber(nsp)
  play_sp(nsp)
  g_sp=nsp
end

OnAvalonAP = function(message, nap)
  nap = tonumber(nap)
  play_ap(nap)
  g_ap = nap
end

OnAvalonMax = function(message, value)
  local type, content = string.match(value,"(%w+) (%d+)")
  if (type == "TP") then
    g_max_tp = tonumber(content)
  elseif (type == "SP") then
    g_max_sp = tonumber(content)
  elseif (type == "AP") then
    g_max_ap = tonumber(content)
  end
end

function OnPluginInstall()
  local ctbl = Ini.read('config.dat')
  if ctbl then
    for name, section in pairs(ctbl) do
      for optionname, optionvalue in pairs(section) do
        config = tonumber(optionvalue)
        if (config == nil) then
          config = optionvalue
        end
        configtbl[name][optionname] = config
      end
    end
  end
  plugintbl[#plugintbl+1] = configtbl.settings.ScreenReader..'.xml'
  for number, plugin in pairs(plugintbl) do
    pluginpath = world.GetInfo(60)..'/'..plugin
    world.LoadPlugin(pluginpath)
  end
  Audio = PPI.Load("aedf0cb0be5bf045860d54b7")
  if not Audio then
    error("Audio-Ausgabe konnte nicht initialisiert werden.")
  end
  if not Path.exists("config.dat") then
    res = utils.msgbox("Herzlichen Glueckwunsch! das Avalon-Soundpack ist nun bereit. Informationen zu Funktionen und Tastenkombinationen stehen in der Readme-Datei. Die Datei jetzt im Editor anzeigen?","Avalon-Soundpack - Readme-Datei","yesno","!",1)
    if (res == "yes") then
      os.execute("notepad.exe readme.txt")
    end
  end
end

function OnPluginCommandEntered(text)
  if (configtbl.settings.RepeatCommand == 0) then
    return text
  end
  if (text == "") and (LastCommand ~= nil) then
    return LastCommand
  else
    if (text =="") then
      LastCommand = ''
      return ''
    end
    LastCommand = text
    return text
  end
end

function OnPluginClose()
  Ini.write('config.dat', configtbl)
end

OnPluginListChanged = function()
  if (atcp == nil) then
  atcp, reloaded = PPI.Load("7c08e2961c5e20e5bdbf7fc5")
  if not atcp then
    Note("ATCP funktioniert nicht!")
  elseif reloaded then
    atcp.Listen("Avalon.TP", OnAvalonTP)
    atcp.Listen("Avalon.SP", OnAvalonSP)
    atcp.Listen("Avalon.AP", OnAvalonAP)
    atcp.Listen("Avalon.MAX", OnAvalonMax)
    atcp.Listen('Avalon.EP', OnAvalonEP)
    atcp.Listen('Avalon.Level', OnAvalonLevel)
    atcp.Listen('Avalon.RoomID', OnAvalonRoomID)
    atcp.Listen('Avalon.Channel', OnAvalonChannel)
    atcp.Listen('Avalon.Dunkel', OnAvalonDunkel)
    atcp.Listen('Avalon.Kampf', OnAvalonKampf)
    atcp.Listen('Avalon.Getoetet', OnAvalonGetoetet)
    atcp.Listen('Avalon.GruppeGetoetet', OnAvalonGetoetet)
  end
  end
end

spdtbl                            = {}
spdind                            = {0,0}
spdstationstbl                    = {}
spdactive                         = false
spdspeed                          = 0.3
spdextraspeed                     = 0.7
auratbl                           = {}
configtbl                         = {}
configtbl.settings                = {}
configtbl.settings.ScreenReader   = 'MushReader'
configtbl.settings.SoundVolume    = 100
configtbl.settings.MusicVolume    = 50
configtbl.settings.TPBar          = 1
configtbl.settings.SPBar          = 1
configtbl.settings.APBar          = 1
configtbl.settings.SoundsMuted    = 0
configtbl.settings.MusicMuted     = 0
configtbl.settings.SafeSpeedwalks = 1
configtbl.settings.RepeatCommand  = 1


world.Accelerator("ctrl+D", "speedwalk_break")
world.Accelerator("ctrl+F12", "tts_switch")
world.Accelerator("F2", "tpbar_switch")
world.Accelerator("F3", "spbar_switch")
world.Accelerator("F4", "apbar_switch")
world.Accelerator("F5", "safespeedwalks_switch")
world.Accelerator("F6", "repeatcommand_switch")
world.Accelerator("F9", "volume_down")
world.Accelerator("F10", "volume_up")
world.Accelerator("F11", "volumetype_switch")
world.Accelerator("ctrl+F11", "switch_mute")
world.Accelerator("ctrl+shift+F11", "switch_fullmute")

function kb_out(sender)
  if (sender == 'Deine') then
    aura_remove('Kampfbeschwoerung')
  end
end

function aura_add(sName)
  auratbl[sName] = os.time()
end

function aura_remove(sName)
  if (auratbl[sName] == nil) then
    return
  end
  time = auratbl[sName]
  msg = sName..' beendet, Dauer: '
  ltime = os.time()
  timediff = ltime - time
  hours = math.floor(timediff / (60 * 60))
  mins = math.floor((timediff - hours * 3600) / 60)
  secs = math.floor(((timediff - hours * 3600) - mins * 60))
  if (hours > 0) then
    msg = msg..tostring(hours)..' Stunden, '
  end
  if (mins > 0) then
    msg = msg..tostring(mins)..' Minuten, '
  end
  msg = msg..tostring(secs)..' Sekunden' 
  NoteColour(msg, 150, 0, 0, 255, 255, 0)
  auratbl[sName] = nil
end

function aura_status()
  msg = ''
  ltime = os.time()
  for aura, time in pairsByKeys(auratbl) do
    msg = msg..aura..': '
    timediff = ltime - time
    hours = math.floor(timediff / (60*60))
    mins = math.floor((timediff - hours * 3600) / 60)
    secs = math.floor(((timediff - hours * 3600) - mins * 60))
    if (hours > 0) then
      msg = msg..tostring(hours)..' Stunden, '
    end
    if (mins > 0) then
      msg = msg..tostring(mins)..' Minuten, '
    end
    msg = msg..tostring(secs)..' Sekunden\n' 
  end
  if (msg == '') then
    msg = 'Zurzeit sind keine Zauber aktiv.'
  else
    msg = string.sub(msg, 1, -2)
  end
  world.Note(msg)
end

function play_tp(ntp)
  if (g_tp == nil) or (g_max_tp == nil) then
    return
  end
  if (configtbl.settings.TPBar == 0) then
    return
  end
  stopifplaying(htpsnd)
  percent = tonumber(ntp) / (tonumber(g_max_tp) / 100)
  if (ntp > g_tp) then
    htpsnd = psnd("Player/tpUp.ogg", 2 * math.floor(percent) - 100)
    tpfullannounced = false
  elseif (ntp < g_tp) then
    htpsnd = psnd("Player/tpDown.ogg", 2 * math.floor(percent) - 100)
    tpfullannounced = false
  end
  if (ntp == g_max_tp) and (tpfullannounced == false) then
    psnd("Player/tpMax.ogg")
    tpfullannounced = true
  end
end

function play_sp(nsp)
  if (g_sp == nil) or (g_max_sp == nil) then
    return
  end
  if (configtbl.settings.SPBar == 0) then
    return
  end
  stopifplaying(hspsnd)
  percent = tonumber(nsp) / (tonumber(g_max_sp) / 100)
  if (nsp > g_sp) then
    hspsnd = psnd("Player/spUp.ogg", 2 * math.floor(percent) - 100)
    spfullannounced = false
  elseif (nsp < g_sp) then
    hspsnd = psnd("Player/spDown.ogg", 2 * math.floor(percent) - 100)
    spfullannounced = false
  end
  if (nsp == g_max_sp) and (spfullannounced == false) then
    psnd("Player/spMax.ogg")
    spfullannounced = true
  end
end

function play_ap(nap)
  if (g_ap == nil) or (g_max_ap == nil) then
    return
  end
  if (configtbl.settings.APBar == 0) then
    return
  end
  stopifplaying(hapsnd)
  percent = tonumber(nap) / (tonumber(g_max_ap) / 100)
  if (nap > g_ap) then
    hapsnd = psnd("Player/apUp.ogg", 2 * math.floor(percent) - 100)
    apfullannounced = false
  elseif (nap < g_ap) then
    hapsnd = psnd("Player/apDown.ogg", 2 * math.floor(percent) - 100)
    apfullannounced = false
  end
  if (nap == g_max_ap) and (apfullannounced == false) then
    psnd("Player/apMax.ogg")
    apfullannounced = true
  end
end

function stopifplaying(id)
  if (id == nil) then
    return false
  end
  res = Audio.isPlaying(id)
  if (res == 1) then
    Audio.stop(id)
  end
end

function psnd(file, pan)
  pan = pan or 0
  if (configtbl.settings.SoundsMuted == 1) then
    return
  end
  return Audio.play(GetInfo(67)..'Sounds/'..file, 0, pan, configtbl.settings.SoundVolume)
end

function pmusic(file)
  if (configtbl.settings.MusicMuted == 1) then
    return
  end
  stopifplaying(hmusic)
  hmusic = Audio.play(GetInfo(67)..'Sounds/Music/'..file, 1, 0, configtbl.settings.MusicVolume)
end

function speedwalk_start(spd)
  if (spd == '') or (string.find(spd, '_') == nil) then
    speedwalk_list(spd)
    return
  end
  if (speedwalklist[spd] == nil) then
    world.Note("Es existiert kein Speedwalk mit diesem Namen.")
    return
  end
  if (configtbl.settings.SafeSpeedwalks == 1) then
    if not stations[spd] then
      world.Note("Dieser Speedwalk muss nach dem alten System umgesetzt werden.")
      spdstationstbl[#spdstationstbl+1] = ''
      speedwalk_init(speedwalklist[spd])
      return
    end
    spdstationstbl[#spdstationstbl+1] = stations[spd]
    speedwalk_init(speedwalklist[spd])
  else
    spdstationstbl[#spdstationstbl+1] = nil
    speedwalk_init(speedwalklist[spd])
  end
end

function speedwalk_list(spd)
  if (spd == '') then
    msg = ''
    i = 0
    for name, way in pairsByKeys(speedwalklist) do
      i = i + 1
      msg = msg..'\t'..name
      if (configtbl.settings.SafeSpeedwalks == 1) then
        if (stations[name]) then
          msg = msg.." (sicher)"
        else
          msg = msg.." (unsicher)"
        end
      end
      msg = msg.."\n"
    end
    msg = 'Speedwalk-Liste ('..tostring(i)..'):\n'..msg
    msg = string.sub(msg, 1, -2)
  else
    spd = string.lower(spd)
    msg = ''
    i = 0
    for name, way in pairsByKeys(speedwalklist) do
      sname = utils.split(name, '_')
      if (string.lower(sname[1]) == spd) then
        i = i + 1
        msg = msg..'\t'..name
        if (configtbl.settings.SafeSpeedwalks == 1) then
          if (stations[name]) then
            msg = msg.." (sicher)"
          else
            msg=msg.." (unsicher)"
          end
        end
        msg = msg.."\n"
      end
    end
    if (i == 0) then
      msg = "Es sind keine Speedwalks vorhanden, die von '..spd..' starten."
    else
      msg = "Speedwalks, die von '..spd..' starten ('..tostring(i)..'):\n"..msg
      msg = string.sub(msg, 1, -2)
    end
  end
  world.Note(msg)
end

function speedwalk_init(speedwalk)
  if not spdactive then
    spdtbl = {}
    spdtbl[#spdtbl+1] = utils.split(speedwalk, " ")
    spdstationstbl = {spdstationstbl[#spdstationstbl]}
    spdind = {1,1}
    spdactive = true
    speedwalk_process()
  else
    spdtbl[#spdtbl+1] = utils.split(speedwalk, " ")
    world.Note("Der neue Speedwalk wurde an den momentan laufenden angehngt.")
  end
end

function speedwalk_process()
  if (configtbl.settings.SafeSpeedwalks == 1) and (spdind[2] == 1) and (spdstationstbl[spdind[1]] ~= '') then
    if (Dunkel == 1) then
      world.Note("Um sichere Speedwalks nutzen zu knnen, muss es auf dem Feld hell sein.")
      spdactive = false
      return
    end
    if (RoomID ~= spdstationstbl[spdind[1]]) and (spdstationstbl[spdind[1]] ~= '') then
      world.Note("Der Speedwalk startet hier nicht.")
      spdactive = false
      return
    end
  end
  if not spdactive then
    return
  end
  command = string.gsub(spdtbl[spdind[1]][spdind[2]], "_", " ")
  world.Execute(command)
  spdind = {spdind[1], spdind[2]+1}
  if (spdind[2] == #spdtbl[spdind[1]] + 1) then
    if not spdtbl[spdind[1]+1] then
      spdactive = false
      spdind = {0,0}
      return
    else
      spdind = {spdind[1] + 1,1}
    end
  end
  if (string.len(spdtbl[spdind[1]][spdind[2]]) <= 2) then
    DoAfterSpecial(spdspeed, "speedwalk_process()", 12)
  else
    DoAfterSpecial(spdextraspeed, "speedwalk_process()", 12)
  end
end

function speedwalk_break()
  if spdactive then
    spdactive = false
  else
    if (spdind[1] == 0) and (spdind[2] == 0) then
      return
    end
    if not spdtbl[spdind[1]][spdind[2]] then
      return
    end
    spdactive = true
    speedwalk_process()
  end
end

function speedwalk_breaklegs()
  if (spdind[1] == 0) and (spdind[2] == 0) then
    return
  end
  spdactive = false
  spdind = {spdind[1],spdind[2]-2}
end

function tts_switch()
  world.UnloadPlugin(configtbl.settings.ScreenReader)
  if (configtbl.settings.ScreenReader == "MushReader") then
    configtbl.settings.ScreenReader = 'tts_jfw'
  else
    configtbl.settings.ScreenReader = 'MushReader'
  end
  world.LoadPlugin(world.GetInfo(60)..'/'..configtbl.settings.ScreenReader..'.xml')
  world.Note('Ausgabesystem gendert.')
  psnd("Misc/ConfigSwitch.ogg")
end

function volume(value)
  if (volumetype == 1) then
    if (configtbl.settings.SoundVolume+value > 100) or (configtbl.settings.SoundVolume+value < 0) then
      return
    end
    configtbl.settings.SoundVolume = configtbl.settings.SoundVolume + value
    psnd("Misc/VolumeSwitch.ogg")
    world.Note("Sound-Lautstrke: "..tostring(configtbl.settings.SoundVolume).." %")
  else
    if (configtbl.settings.MusicVolume+value > 100) or (configtbl.settings.MusicVolume + value < 0) then
      return
    end
    configtbl.settings.MusicVolume = configtbl.settings.MusicVolume + value
    psnd("Misc/VolumeSwitch.ogg")
    if (hmusic) and (Audio.isPlaying(hmusic) == 1) then
      Audio.setVol(configtbl.settings.MusicVolume, hmusic)
    end
    world.Note("Musik-Lautstrke: "..tostring(configtbl.settings.MusicVolume).." %")
  end
end

function volumetype_switch()
  if (volumetype == 1) then
    volumetype = 2
    world.Note("Lautstrkeregelung fr Musik.")
  else
    volumetype = 1
    world.Note("Lautstrkeregelung fr Sounds.")
  end
  psnd('Misc/ConfigSwitch.ogg')
end

function tpbar_switch()
  if (configtbl.settings.TPBar == 1) then
    configtbl.settings.TPBar = 0
    world.Note("TP-Ausgabe ausgeschaltet.")
  else
    configtbl.settings.TPBar = 1
    world.Note("TP-Ausgabe eingeschaltet.")
  end
  psnd("Misc/ConfigSwitch.ogg")
end

function apbar_switch()
  if (configtbl.settings.APBar == 1) then
    configtbl.settings.APBar = 0
    world.Note("AP-Ausgabe ausgeschaltet.")
  else
    configtbl.settings.APBar = 1
    world.Note("AP-Ausgabe eingeschaltet.")
  end
  psnd("Misc/ConfigSwitch.ogg")
end

function spbar_switch()
  if (configtbl.settings.SPBar == 1) then
    configtbl.settings.SPBar = 0
    world.Note("ZP-Ausgabe ausgeschaltet.")
  else
    configtbl.settings.SPBar = 1
    world.Note("ZP-Ausgabe eingeschaltet.")
  end
  psnd("Misc/ConfigSwitch.ogg")
end

function repeatcommand_switch()
  if (configtbl.settings.RepeatCommand == 1) then
    configtbl.settings.RepeatCommand = 0
    world.Note("Letztes Kommando mit Enter wiederholen ausgeschaltet.")
  else
    configtbl.settings.RepeatCommand = 1
    world.Note("Letztes Kommando mit Enter wiederholen eingeschaltet.")
  end
  psnd("Misc/ConfigSwitch.ogg")
end

function round(num, idp)
  return tonumber(string.format(" %." .. (idp or 0) .. "f", num))
end

function OnPluginDisconnect()
  g_tp = nil
  g_max_tp = nil
  g_sp = nil
  g_max_sp = nil
  g_ap = nil
  g_max_ap = nil
  apfullannounced = false
  tpfullannounced = false
  spfullannounced = false
  hapsnd = nil
  hspnil = 0
  htpsnd = nil
  LevelUpdate = false
  PlayerEP = nil
  PlayerLevel = nil
  RoomName = ''
  stopifplaying(hmusic)
  hmusic = nil
end

function switch_mute()
  if (volumetype == 1) then
    if (configtbl.settings.SoundsMuted == 0) then
      configtbl.settings.SoundsMuted = 1
      world.Note("Sounds ausgeschaltet.")
    else
      configtbl.settings.SoundsMuted = 0
      world.Note("Sounds eingeschaltet.")
    end
  else
    if (configtbl.settings.MusicMuted == 0) then
      configtbl.settings.MusicMuted = 1
      stopifplaying(hmusic)
      RoomName = ''
      world.Note("Musik ausgeschaltet.")
    else
      configtbl.settings.MusicMuted = 0
      atcp.Send('ava_req_mapper')
      world.Note("Musik eingeschaltet.")
    end
  end
  psnd('Misc/ConfigSwitch.ogg')
end

function switch_fullmute()
  if (configtbl.settings.SoundsMuted == 0) then
    configtbl.settings.SoundsMuted = 1
    world.Note("Sounds ausgeschaltet.")
  else
    configtbl.settings.SoundsMuted = 0
    world.Note("Sounds eingeschaltet.")
  end
  if (configtbl.settings.MusicMuted == 0) then
    configtbl.settings.MusicMuted = 1
    stopifplaying(hmusic)
    RoomName = ''
    world.Note("Musik ausgeschaltet.")
  else
    configtbl.settings.MusicMuted = 0
    atcp.Send('ava_req_mapper')
    world.Note("Musik eingeschaltet.")
  end
  psnd('Misc/ConfigSwitch.ogg')
end

function array_concat(...)
  local t = {}
  local arg ={...}
  for i = 1, #arg do
    local array = arg[i]
    if (type(array) == "table") then
      for j = 1, #array do
        t[#t+1] = array[j]
      end
    else
      t[#t+1] = array
    end
  end
  return t
end

function safespeedwalks_switch()
  if (configtbl.settings.SafeSpeedwalks == 1) then
    configtbl.settings.SafeSpeedwalks = 0
    world.Note("Die Speedwalks werden nun nicht mehr berprft.")
  else
    configtbl.settings.SafeSpeedwalks = 1
    world.Note("Die Speedwalks werden nun mglichst abgesichert.")
  end
  psnd("Misc/ConfigSwitch.ogg")
end

function print_position()
  if (Dunkel == 1) then
    world.Note("Fr diesen Raum konnten keine Informationen abgerufen werden, da es hier derzeit dunkel ist.")
    return
  end
  world.Note("Raumname: "..RoomName)
  if (X and Y) then
    world.Note("X: "..tostring(X)..", Y: "..tostring(Y))
  end
  if (configtbl.settings.SafeSpeedwalks == 1) then
    list = stations_getspeedwalksbyroomid(RoomID)
    if (#list > 0) then
      msg = 'Von hier starten folgende sichere Speedwalks ('..#list..'):\n'
      for number, walk in pairs(list) do
        msg = msg..'\t'..walk..'\n'
      end
      msg = string.sub(msg, 1, -2)
      world.Note(msg)
    end
  end
end

function rgbtohex(r, g, b)
  return r + (g * 256) + (b * 65536)
end

function NoteColour(text, rt, gt, bt, rb, gb, bb, style)
  if not rt then
    rt = 255
  end
  if not gt then
    gt = 255
  end
  if not bt then
    bt = 255
  end
  if not rb then
    rb = 0
  end
  if not gb then
    gb = 0
  end
  if not bb then
    bb = 0
  end
  world.NoteColourRGB(rgbtohex(rt, gt, bt), rgbtohex(rb, gb, bb))
  if style then
    world.NoteStyle(style)
  end
  world.Note(text)
  if style then
    world.NoteStyle(0)
  end
  world.NoteColourRGB(rgbtohex(255, 255, 255), 0)
end
]]>
</script>


</muclient>
