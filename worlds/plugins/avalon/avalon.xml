<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Sonntag, April 22, 2012, 2:56  -->
<!-- MuClient version 4.75 -->

<!-- Plugin "avalon" generated by Plugin Wizard -->

<muclient>
<plugin
   name="avalon"
   author="Magician, Dranor, Chiaray"
   id="02dade4f6131c8d67e85c7ee"
   language="Lua"
   save_state="n"
   date_written="2014-02-07 09:28:30"
   requires="4.92"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   match="Du bekommst nun eine Zeit lang erhoehte Erfahrung."
   send_to="12"
   sequence="100"
  >
  <send>Timers.AddTimer("Bonuserfahrung", 60 * 10, 60 * 60, "", true, true)</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du musst hier schon schwimmen, um weiterzukommen!"
   send_to="14"
   sequence="95"
   omit_from_output="y"
  >
  <send>world.Send("schwimme " ..world.GetCommandList(1)[1])</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du musst hier schon klettern, um weiterzukommen!"
   send_to="14"
   sequence="95"
   omit_from_output="y"
  >
  <send>world.Execute("klettere " ..world.GetCommandList(1)[1])</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Dort versperrt Dir ein (Tor) den Weg\.$|^Da ist Dir doch das (Tor) im Weg[\.|\!]$|^Dort versperrt Dir eine (Pforte|Tuer|Luke) den Weg\.$|^Die (Zaunpforte) ist geschlossen und versperrt Dir folglich den Weg\.$|^Solange das (Hafengatter) geschlossen ist\, kommst Du nicht durch\.$|^Du moechtest aber nicht durch die geschlossene (Tuer) laufen\?$|^Da ist Dir eine (Luke) im Weg\.$"
   regexp="y"
   script="open_door"
   sequence="95"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Dein * pulsiert kurz warm in Deiner Hand."
   sound="GolemCultists/CoreLoadFull.ogg"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Dein Energiekern vibriert kurz."
   sequence="100"
   sound="GolemCultists/CoreLoad.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Dein Energiekern blitzt kurz * auf."
   sequence="100"
   sound="GolemCultists/CoreLoad.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Dein * flackert heftig auf, lange wird * Dich wohl nicht mehr"
   sequence="100"
   sound="spells/flicker.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Du beginnst, Deine Haende auf mystische Art und Weise zu bewegen."
   sequence="100"
   sound="spells/ArkanShield1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Zwischen Deinen Haenden entsteht eine leuchtende Wolke, die sich immer mehr"
   sequence="100"
   sound="spells/ArkanShield2.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Die Wolke verteilt sich auf Deinen gesamten Koerper."
   sequence="100"
   sound="spells/ArkanShield3.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Du wirst von einem Arkanschild umgeben."
   sequence="100"
   sound="spells/ArkanShieldOn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Dein Arkanschild loest sich auf."
   sequence="100"
   sound="spells/ArkanShieldOff.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du nimmst Deinen Fokuskristall *"
   send_to="12"
   sequence="100"
  >
  <send>hdksnd = Sound.PlaySound("demon_warriors/crystalfocus.ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du spuerst den Widerstand des Daemons auf Deinen Willen *"
   sequence="100"
   sound="demon_warriors/demoncommand.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du tastest telepathisch nach dem Bewusstsein von * und *"
   sequence="100"
   sound="demon_warriors/demoncontrol.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="In dem Moment, als er Dir den gewuentschten Namen uebermittelt, oeffnest*"
   send_to="12"
   sequence="100"
   sound="demon_warriors/demonexecute.ogg"
  >
  <send>hdksnd:Fadeout(1000)</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Erfolgreich hast Du Deinen Daemon in * "
   send_to="12"
   sequence="100"
   sound="demon_warriors/demonexecute.ogg"
  >
  <send>hdksnd:Fadeout(1000)</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du reibst Dir Deine Schlaefen, um den pochenden Schmerz zu vertreiben.*"
   send_to="12"
   sequence="100"
   sound="demon_warriors/demoncounter.ogg"
  >
  <send>hdksnd:Fadeout(1000)</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="* schreit hasserfuellt auf und wollte sich *"
   send_to="12"
   sequence="100"
   sound="demon_warriors/demondisappear.ogg"
  >
  <send>hdksnd:Fadeout(1000)</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Dein Fokuskristall leuchtet auf und ein Portal *"
   sequence="100"
   sound="demon_warriors/portalappear.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du starrst * mit festem Blick an."
   sequence="100"
   sound="demon_warriors/crystallight.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du schlaegst ruckartig Deinen Fokuskristall auf den Boden, *"
   send_to="12"
   sequence="100"
   sound="demon_warriors/demonappear.ogg"
  >
  <send>hdksnd:Fadeout(1000)</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du schliesst fuer einen Moment Deine Augen. *"
   sequence="100"
   sound="demon_warriors/demoncall.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du konzentrierst Dich auf * woraufhin dieser *"
   sequence="100"
   sound="demon_warriors/crystallight.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="Du schliesst Deine Augen, konzentrierst Dich und verbannst *"
   send_to="12"
   sequence="100"
  >
  <send>Execute("daemonenliste")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match='^Dein\sFokuskristall\sblitzt\skurz\sauf\sund\sder\sName\s\"(.*)\"\szuckt\,\sverbunden\smit\sdem\sAbbild\seines\s(.*)\sdurch\sDeine\sGedanken\.\Z'
   multi_line="y"
   lines_to_match="2"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Add', "%1", string.sub("%2",1,-2))</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="\|?\s*(Krasit|Sensal|Bullrik|Azmarog)\s+\|?\s*(\w+)\s+.*"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Add', "%2", "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Daemonenkrieger"
   match="\|?\s?Uebersicht ueber Deine Daemonen\s*\|?"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Reset')</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="\|\s(\w*)(\s)*\|\s(.*)geladen\s\(\s([0-9]*)\s\%\)(\s)*\|(.*)(\s)*\|"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Get', "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="^(\w*)\s*(.*)geladen\s\(\s([0-9]*)\s\%\)\s*(.*)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Get', "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="^(\s)*FEBRON\s\-\sUEBERSICHT"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Clear')</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="^Febron(\s*)Ladungszustand(\s*)Evolierung"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Clear')</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="*Etwas erschoepft ist er aber... Dein armer Febron!*"
   send_to="12"
   sequence="100"
  >
  <send>world.Execute("febron")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="Du nimmst traurig Dein Febron * aus Deinem Febronenbeutel und wirfst*"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Forget', "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="Du nimmst * aus Deinem Febronenbeutel und legst ihn vorsichtig in Dein*"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Forget', "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="Du nimmst * aus Deinem Febronenlager heraus und legst ihn vorsichtig*"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Add', "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="^Versan murmelt leise einen Namen zu dem Febron, er hoert sich an wie (\w*)\."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Get', "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Hyraskrieger"
   match="^Schweren Herzens verschenkst Du Dein Febron &quot;(\w*)&quot; an (\w*)\."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Forget', "%1")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="* hat damit * Punkte erreicht und gewonnen!"
   sequence="95"
   sound="Games/Hajo/loose.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du hast * Punkte erreicht und damit gewonnen. Herzlichen Glueckwunsch!"
   sequence="95"
   sound="Games/Hajo/win.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Damit ist dieses Spiel beendet."
   send_to="12"
   sequence="95"
  >
  <send>world.EnableGroup("Spiele_Hajo",0)</send>
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match=".* scheint etwas unaufmerksam gewesen zu sein.*|Du bist etwas unaufmerksam und bemerkst nicht.*"
   regexp="y"
   sequence="95"
   sound="Games/Hajo/dicefail.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du kannst in diesem 2. Zug nichts herauslegen *"
   sequence="95"
   sound="Games/Hajo/secondturn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match=".* bekommt insgesamt .* Punkte gutgeschrieben. Der Joker.*|Du bekommst insgesamt .* Punkte gutgeschrieben. Du hattest.*"
   regexp="y"
   sequence="95"
   sound="Games/Hajo/writejoker.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du setzt Deinen Joker\.|.* setzt .* Joker\."
   regexp="y"
   sequence="95"
   sound="Games/Hajo/joker.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du konntest auch nach drei Zuegen noch keine Punkte machen\.|.* konnte auch nach drei Zuegen noch keine Punkte machen\."
   regexp="y"
   sequence="95"
   sound="Games/Hajo/nowrite.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Nun bist Du an der Reihe."
   sequence="95"
   sound="Games/Hajo/yourturn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du bekommst insgesamt .* Punkte gutgeschrieben\.|.* bekommt insgesamt .* Punkte gutgeschrieben\."
   regexp="y"
   sequence="95"
   sound="Games/Hajo/write.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du konntest mit allen rausgelegten Wuerfeln Punkte machen .*|.* konnte alle Wuerfel rauslegen und hat nun aufs neue 3 Zuege.*"
   regexp="y"
   sequence="95"
   sound="Games/Hajo/again.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du legst .* raus\.|.* legt .* raus\."
   regexp="y"
   sequence="94"
   sound="Games/Hajo/collect.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Spiele_Hajo"
   match="Du wuerfelst .*|.* wuerfelt .*"
   regexp="y"
   sequence="95"
   sound="Games/Hajo/dice.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Alle angegebenen Spieler sind da, also kann es losgehen."
   send_to="12"
   sequence="95"
  >
  <send>world.EnableGroup("Spiele_Hajo",1)</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du peilst mit Deinem Sextanten * an* und kannst schon nach"
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="kurzer Zeit .* Position ausmachen\. Du gruebelst noch ein wenig.*"
   regexp="y"
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match=".*schliesslich zu folgendem Ergebnis:"
   regexp="y"
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ok, ASCII-Grafiken werden nun nicht mehr vermieden."
   send_to="12"
   sequence="95"
  >
  <send>config_graphics(true)</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ok, ASCII-Grafiken werden nun moeglichst vermieden."
   send_to="12"
   sequence="95"
  >
  <send>config_graphics(false)</send>
  </trigger>
  <trigger
   enabled="y"
   match="Dein letzter Logout war am *"
   send_to="12"
   sequence="95"
  >
  <send>OnAvalonLogin()</send>
  </trigger>
  <trigger
   enabled="y"
   match="KRAACK. Uh, oh. Das klang nicht gut. Vielleicht solltest Du *"
   sequence="102"
   sound="Items/ArmorBreak.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du holst kraeftig mit Deiner Angel aus und wirfst den Koeder weit *"
   sequence="100"
   sound="Fishing/FishCast.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das muss ein * Fisch sein, der da angebissen hat."
   sequence="100"
   sound="Fishing/Fish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mist. Du stellst Dich viel zu ungeschickt an, *"
   sequence="100"
   sound="Fishing/FishEscape.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du hast einen schoenen Fisch geangelt."
   sequence="100"
   sound="Fishing/FishCatch.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du ziehst mit Leibeskraeften an der Angel, um den Fisch aus dem Wasser zu"
   sequence="100"
   sound="Fishing/FishLinePull.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dein blaeulich-silberner, getragener Ring entfaltet nun seine Wirkung."
   sequence="100"
   sound="Misc/Rings/Bonus.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dein blaeulich-silberner, getragener Ring leuchtet kurz auf."
   sequence="100"
   sound="Misc/Rings/Bonus.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Gratulation! Du hast eine Tagesaufgabe geloest."
   sequence="100"
   sound="Misc/DailyTask.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Gratulation! Du hast eine Wochenaufgabe geloest."
   sequence="100"
   sound="Misc/WeeklyTask.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Gratulation! Du hast eine Aktionsaufgabe geloest."
   sequence="100"
   sound="Misc/SpecialTask.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Besonderes Glueck!"
   sequence="100"
   sound="Misc/DayGift.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bist soeben gestorben."
   sequence="100"
   sound="Player/Die.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein weisser Schatten fliegt gen Himmel."
   sequence="100"
   sound="Player/Die.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Eine heilige Macht umgibt Dich."
   sequence="100"
   sound="Weapons/holy_sword/might_on.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die heilige Macht weicht von Dir."
   sequence="100"
   sound="Weapons/holy_sword/might_off.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* heiliges, gefuehrtes Schwert leuchtet nur noch ganz schwach."
   sequence="100"
   sound="Weapons/holy_sword/weak.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* heiliges, gefuehrtes Schwert leuchtet auf."
   sequence="100"
   sound="Weapons/holy_sword/light_up.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* heiliges, gefuehrtes Schwert erstrahlt kurz."
   sequence="100"
   sound="Weapons/holy_sword/shine.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* heiliges, gefuehrtes Schwert blitzt auf."
   sequence="100"
   sound="Weapons/holy_sword/flash.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* heiliges, gefuehrtes Schwert strahlt auf und blendet Dich."
   sequence="100"
   sound="Weapons/holy_sword/shine_blind.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Eine goettliche Macht hilft Dir."
   sequence="100"
   sound="Weapons/holy_sword/devine.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Deine Fuehler fangen an zu blitzen, und darauf fangen sie an in einem"
   sequence="100"
   sound="Febracim/BallStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ueber Deinem Kopf entsteht eine gleissend helle Energiekugel, um deren"
   sequence="100"
   sound="Febracim/BallCreate.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Deine Energiekugel schiesst los und fliegt direkt auf *"
   sequence="99"
   sound="Febracim/Ball.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du konzentrierst Dich auf * waehrend*"
   sequence="100"
   sound="Febracim/TailStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du schiesst einen Feuerschweif auf *"
   sequence="99"
   sound="Febracim/Tail.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du starrst * an, waehrend*"
   sequence="100"
   sound="Febracim/ShockStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die Vibration uebertraegt sich immer staerker werdend auf Deinen gesamten"
   sequence="100"
   sound="Febracim/ShockCharge.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die Schockwelle breitet sich aus, und fliegt in Richtung*"
   sequence="100"
   sound="Febracim/Shock.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Als Du * mit Deinen gelben Augen*"
   sequence="100"
   sound="Febracim/Devour.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du Sprichst laut die Worte: Febra mestasa. Kurz darauf oeffnet sich gleich"
   sequence="100"
   sound="Febracim/ChamberOpen.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mit einem langsamen Knirschen schliesst sich die Luke ueber Dir. Was hat"
   sequence="100"
   sound="Febracim/ChamberClose.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mit einem langsamen Knirschen schliesst sich die Luke wieder, und ist schon"
   sequence="100"
   sound="Febracim/ChamberClose.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Langsam beginnt sich der Raum mit einer Fluessigkeit zu fuellen."
   sequence="100"
   sound="Febracim/ChamberFill1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Boden unter Dir ist schon gar nicht mehr zu erkennen, und Du merkst,"
   sequence="100"
   sound="Febracim/ChamberFill1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die Fluessigkeit steigt immer weiter. Panik will in Dir aufkommen. Der"
   sequence="100"
   sound="Febracim/ChamberFill2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bist nun voellig von Dieser Fluessigkeit umgeben. Deine Lungen fuellen"
   sequence="100"
   sound="Febracim/ChamberLungs.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Febracim entspannt sich und geniesst das Bad in dieser seltsamen"
   sequence="100"
   sound="Febracim/ChamberFill2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du gewoehnst Dich langsam an das Einatmen der Fluessigkeit statt der"
   sequence="100"
   sound="Febracim/ChamberStretch.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Febracim scheint sich zu Strecken und fuehlt sich scheinbar richtig"
   sequence="100"
   sound="Febracim/ChamberStretch.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Febracim heilt sich langsam."
   sequence="100"
   sound="Febracim/ChamberHeal.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bekommst wieder Boden unter den Fuessen."
   sequence="99"
   sound="Febracim/ChamberStop.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mit einem Knirschen an der Decke oeffnet sich die Luke wieder. Der Febracim"
   sequence="99"
   sound="Febracim/ChamberOpen.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Du streckst Deine Arme gen Himmel und *"
   sequence="95"
   sound="Spells/Stardust1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Zwischen Deinen Haenden entsteht eine leuchtende Kugel,*"
   sequence="95"
   sound="Spells/Stardust2.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Die Kugel zerspringt mit einem lauten Knall*"
   sequence="95"
   sound="Spells/Stardust3.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Du wirst von Sternenstaub umgeben."
   sequence="95"
   sound="Spells/StardustOn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Dein Sternenstaub loest sich auf."
   sequence="95"
   sound="Spells/StardustOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Verwende alten Koerper..."
   send_to="12"
   sequence="95"
  >
  <send>OnAvalonLogin()</send>
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Du beginnst Deine regenerativen Energien anzuzapfen."
   sequence="95"
   sound="Spells/MagicCharge1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Du spuerst, wie die Energien Dir zur Verfuegung stehen."
   sequence="95"
   sound="Spells/MagicCharge2.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Du hast einen Teil Deiner regenerativen Energien in Deine Zauber umgelenkt."
   sequence="95"
   sound="Spells/MagicChargeOn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Magier"
   match="Deine Energien fliessen wieder normal."
   sequence="95"
   sound="Spells/MagicChargeOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ploetzlich bildet sich eine dicke Wolke ueber Deinem Kopf."
   sequence="95"
   sound="Spells/WaterAura2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dein Staubschleier loest sich auf."
   sequence="95"
   sound="Spells/EarthAuraOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du hebst Deine Haende, beschreibst einen Halbkreis.*|Die Partikel verdichten sich um Dich."
   regexp="y"
   sequence="95"
   sound="Spells/EarthAuraOn.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Aus der Erde loesen sich kleine Partikel*"
   sequence="95"
   sound="Spells/EarthAura2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du hebst beide Arme, drehst die Handflaechen gen Boden*"
   sequence="95"
   sound="Spells/EarthAura1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Deine Watteflocken loesen sich auf."
   sequence="95"
   sound="Spells/AirAuraOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bist in den Watteflocken kaum noch auszumachen."
   sequence="95"
   sound="Spells/AirAuraOn.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst, aus dem Wattebausch kleine Flocken*"
   sequence="95"
   sound="Spells/AirAura2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du ziehst einen Wattebausch aus Deinem Gepaeck*"
   sequence="95"
   sound="Spells/AirAura1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dein Wasserschleier loest sich auf."
   sequence="95"
   sound="Spells/WaterAuraOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Es regnet aus der Wolke auf Dich herab*"
   sequence="95"
   sound="Spells/WaterAuraOn.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beschreibst mit Deinen Haenden mystische Zeichen."
   sequence="95"
   sound="Spells/WaterAura1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Deine Todesaura loest sich auf."
   sequence="95"
   sound="Spells/DeathAuraOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du senkst Deine Haende, aber der Schutz der schwarzen Schleier.*|Die schwarzen Schleier verdichten sich um Dich."
   regexp="y"
   sequence="95"
   sound="Spells/DeathAuraOn.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Zwischen Deinen Handflaechen bilden sich schwarze Schleier*"
   sequence="95"
   sound="Spells/DeathAura1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Deine Feueraura loest sich auf."
   sequence="95"
   sound="Spells/FireAuraOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du senkst Deine Haende, aber der Schutz der Manawolken.*|Die Manawolken verdichten sich um Dich."
   regexp="y"
   sequence="95"
   sound="Spells/FireAuraOn.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Zwischen Deinen Handflaechen bilden sich Manawolken*"
   sequence="95"
   sound="Spells/FireAura2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du streckst beide Handflaechen von Dir und beginnst*"
   sequence="95"
   sound="Spells/FireAura1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ploetzlich erscheint eine grosse Welle, und Du verschluckst Wasser. *"
   sequence="100"
   sound="Player/Drown1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Du konzentrierst Dich auf *"
   sequence="100"
   sound="GolemCultists/GolemConcentrate.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Du versuchst * telepathisch einen Befehl zu geben."
   sequence="100"
   sound="GolemCultists/GolemCommunicate.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Die Augen von * blitzen kurz auf."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="* trifft * mit seiner Faust. Gleichzeitig *"
   sequence="100"
   sound="GolemCultists/GolemManaPunch.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="* magischer Schutzschild loest sich auf."
   sequence="100"
   sound="GolemCultists/GolemShieldOff.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="* umgibt ein magischer Schutzschild."
   sequence="100"
   sound="GolemCultists/GolemShield.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Das Glitzern legt sich als schuetzendes Schild ueber Dich."
   sequence="100"
   sound="GolemCultists/CoreShieldCreate.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Du konzentrierst Dich."
   sequence="100"
   sound="spells/Prepare.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Du nimmst Deinen Energiekern in die Hand und *"
   sequence="100"
   sound="GolemCultists/CoreShieldAbsorb.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Das Leuchten Deines Energiekerns laesst nach, waehrend Du *"
   sequence="100"
   sound="GolemCultists/CoreShieldShine.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Dein Kernschild loest sich auf."
   sequence="100"
   sound="GolemCultists/CoreShieldBreak.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Du suchst an * nach Rissen und anderen Macken."
   sequence="100"
   sound="GolemCultists/GolemHealSearch.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="Schnell verschliesst Du die Wunden des Golems. Dabei murmelst Du *"
   sequence="100"
   sound="GolemCultists/GolemHealFix.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Golemkultisten"
   match="* sieht schon viel besser aus."
   sequence="100"
   sound="GolemCultists/GolemHealFinish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du schluckst noch mehr Wasser."
   sequence="100"
   sound="Player/Drown2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beruhigst Dich wieder."
   sequence="100"
   sound="Player/Drown3.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="^Du kletterst nach .*$|^.* klettert nach .*$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/Climb/"..math.random(1,11)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Deine Robe schmiegt sich eng an Deinen Koerper.*"
   omit_from_output="y"
   sequence="100"
   sound="Misc/Zwonirobe.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du hast einen neuen Brief von * bekommen."
   sequence="100"
   send_to="12"
  >
  <send>Sound.PlaySound("Misc/Post"..math.random(1,2)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="NEUE Briefe liegen fuer Dich auf der Post."
   sequence="100"
   sound="Misc/Post.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Nynaeves Sonnenschein&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Sun.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Da Du * im Schlaf beherrschst*"
   omit_from_output="y"
   sequence="100"
   sound="Bard/InstrumentMaster.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="*dass Du sogar etwas Kraft sparst."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Rosarios Tanzlied&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Dance.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Rumbolds Ruhe&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Quietness.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Eine Stimmung der Ruhe und Friedfertigkeit benebelt alle Gegner."
   sequence="100"
   sound="Bard/QuietnessOn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="* kann sich langsam vom beruhigenden *"
   sequence="100"
   sound="Bard/QuietnessOff.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Wallenroths Wut&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Rage1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Deine Bewegungen werden zusehends schneller."
   sequence="100"
   sound="Bard/Rage2.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Kaum hast Du aufgehoert zu spielen, bewegt sich wieder alles in seiner"
   sequence="100"
   sound="Bard/RageOver.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Barden"
   match="Die Lichtwesen von * scheinen Dein Mana etwas aufzufrischen."
   sequence="100"
   sound="Bard/Sun_Regen.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Barden"
   match="Deine Lichtwesen scheinen das Mana von * etwas aufzufrischen."
   sequence="100"
   sound="Bard/Sun_Regen.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Barden"
   match="Bei jeder Beruehrung teilen Lichtwesen ihr Mana mit Dir. "
   sequence="100"
   sound="Bard/Sun_Regen.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Dolores' Euphorie&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Euphoria.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du hast keine magische Kraft mehr, die Du in das Lied*"
   sequence="100"
   sound="Bard/OutOfSpellPower.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mist. Noch immer nichts gefunden."
   sequence="100"
   sound="Mining/HammerFailed.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match=".*Sie ist noch ganz gut zu erkennen.*|.*Sie ist noch ausreichend zu erkennen.*"
   regexp="y"
   sequence="100"
   sound="Rune/QuiteGood.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du springst in die Fluten."
   sequence="100"
   sound="Player/EnterWater.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du verlaesst das Wasser."
   sequence="100"
   sound="Player/ExitWater.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mit dem Messer in der Hand machst Du Dich an die Arbeit."
   sequence="100"
   sound="Cook/Disembowel2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst magische Rituale auszufuehren."
   sequence="100"
   sound="Spells/ShieldRituals.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match=".*Du befreist Dich von Deiner Steinhaut.*|.*Deine Steinhaut loest sich auf.*"
   regexp="y"
   sequence="100"
   sound="Spells/StoneskinOver.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das hat Deiner Steinhaut den letzten Rest gegeben, sie loest sich auf."
   sequence="100"
   sound="Spells/StoneskinBreak.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du murmelst Beschwoerungsformeln. Staub und kleine Steinchen .*"
   regexp="y"
   sequence="100"
   sound="Spells/StoneskinStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Eine graue Schicht ueberzieht langsam Deine Haut, die *"
   sequence="100"
   sound="Spells/StoneskinContinue.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bist nun vollkommen in eine Steinhaut eingehuellt, *"
   sequence="100"
   sound="Spells/StoneskinFinish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du verdrehst die Augen."
   sequence="100"
   sound="Spells/ShieldConcentrate.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du wirst von einem magischen Schild umgeben*"
   sequence="100"
   sound="Spells/ShieldOn.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dein * loest sich auf."
   sequence="101"
   sound="Spells/ShieldOff.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Du hast erfolgreich * in *"
   sequence="100"
   sound="Rune/EngraveFinish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du hast es geschafft, .* faellt um.*|.* hat es geschafft, .* faellt um.*"
   regexp="y"
   sequence="100"
   sound="Misc/ChopComplete.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das sieht doch schon fast wie ein fertiges Lederstueck aus."
   sequence="100"
   sound="Tan/Finish2.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du hoerst auf, * zu spielen."
   sequence="100"
   sound="Bard/Stop.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du hoerst auf, * zu singen."
   sequence="100"
   sound="Bard/Stop_Vocal.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Tue beendet."
   omit_from_output="y"
   sequence="100"
   sound="Misc/Done.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Viel fehlt Dir nicht mehr zum fertigen Lederstueck."
   sequence="100"
   sound="Tan/Finish1.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Von der .*rune .*|Schliesslich ist von der .*rune nichts mehr uebrig."
   regexp="y"
   sequence="100"
   sound="Rune/RuneGone.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Vorsichtig polierst Du * noch etwas."
   omit_from_output="y"
   sequence="100"
   sound="Rune/Polish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Was? Wie? Wo? Haeh?!? Das habe ich nicht verstanden."
   sequence="100"
   sound="Misc/noway.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Renfields Wirrsal&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Confusion.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, * auszubessern."
   sequence="100"
   sound="Smith/RepairStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* folgt Dir."
   omit_from_output="y"   
   sequence="100"
   sound="Smith/Following.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match=".* heilige Aura loest sich auf.|Die heilige Aura von .* loest sich auf."
   regexp="y"
   sequence="100"
   sound="Spells/KB_Out.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, * zu schmieden."
   sequence="100"
   sound="Smith/start.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Auf * lodert eine kleine Flamme kurz auf."
   sequence="100"
   sound="Rune/Flame.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Du faengst an, * auf *"
   sequence="100"
   sound="Rune/FileStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="^Du schwimmst nach .*$|^Du treibst mit der Stroemung nach .*$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/Swim/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Auf den Tintagelschen Aeckern."
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/Ground/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleines Huegelland."
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/Ground/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Du faengst an, * in *"
   sequence="100"
   sound="Rune/EngraveStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Auf einem Pfad von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Auf einer Eisscholle*"
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/ice/"..math.random(1,1)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="In einer Eiswueste*"
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/ice/"..math.random(1,1)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du kniest nieder und suchst den Boden nach Spuren ab."
   sequence="100"
   sound="Track/Begin.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="OK, Du verfolgst nun *"
   sequence="100"
   sound="Player/HuntStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du knotest Dir ein *"
   sequence="100"
   sound="Hiker/Knot.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dein * ist wieder getrocknet."
   sequence="100"
   sound="Hiker/Dry.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Oh Mist, jetzt bist Du auf Granit gestossen und kannst nicht weitergraben!"
   sequence="100"
   sound="Mining/DigGranite.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du kommst dabei heftig ins Schwitzen."
   sequence="100"
   sound="Tan/Breath.ogg"
   omit_from_output="y"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Schliesslich bist Du der Meinung, die Rune nicht weiter nachziehen zu"
   sequence="100"
   sound="Rune/FileEnd.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Weiter kannst Du * nicht ausbessern."
   sequence="100"
   sound="Smith/RepairEnd.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein Weg, er verlaeuft von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Unter dem Pfad der Unterwelt. Er fuehrt nach * und *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du wanderst auf einem Pfad auf der Insel Holbytla entlang. Er fuehrt nach *, * und *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2, %3</send>
  </trigger>
  <trigger
   enabled="y"
   match="^Du beginnst Dich zu konzentrieren.$|^.* beginnt sich zu konzentrieren.$|^Du beginnst Deinen Zauberspruch vorzubereiten.$|^Du konzentrierst Dich .*$|^.* konzentriert sich .*$"
   regexp="y"
   sequence="100"
   sound="Spells/Prepare.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du wanderst auf einem Pfad auf der Insel Holbytla entlang. Er fuehrt von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du versuchst Dich darauf zu konzentrieren, * versagst Du jedoch klaeglich."
   sequence="100"
   sound="Spells/Fail.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das riecht aber lecker."
   sequence="100"
   sound="Cook/Smell.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="^Du erhebst.*angriff.*$|^.*erhebt.*angriff.*$|^.*greift.*mit.*an.$|^.*Angriff auf.*$"
   ignore_case="y"
   regexp="y"
   sequence="100"
   sound="Weapons/CounterAttack.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das sieht nicht besonders ergiebig aus."
   omit_from_output="y"
   sequence="100"
   sound="Mining/CoalFail.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du faengst an, eine Wasserstelle zu graben."
   sequence="100"
   sound="WateringPlace/Begin.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dein Lichtbogen verschwindet."
   sequence="100"
   sound="Spells/light3out.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein grosser Lichtbogen breitet sich ueber * Kopf aus."
   sequence="100"
   sound="Spells/light3b.ogg"
   send_to="12"
  >
  <send>atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   regexp="y"
   match="Du faengst an, mit .* zu faellen.|.* faengt an, mit .* zu faellen"
   sequence="100"
   sound="Misc/ChopBegin.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der * Luftvortex scheint * zu *"
   sequence="100"
   sound="Monsters/Vortex/Strong.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner Funke springt auf die Holzspaene ueber und *"
   sequence="100"
   sound="Firestarting/Succeed.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Aus der Schmelze ist ein Rumpeln zu hoeren. Irgendetwas tut sich da drin."
   omit_from_output="y"
   sequence="100"
   sound="Mining/MeltRumble.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Du feilst vorsichtig die Raender der .* auf .*|Kraftvoll schleifst Du die .* von .*"
   regexp="y"
   sequence="100"
   sound="Rune/File.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Avalon! Eine Welt, in der alles moeglich und nichts unmoeglich ist."
   sequence="100"
   sound="Misc/start.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du folgst * nach *."
   sequence="100"
   sound="Player/Hunt.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du verteilst * Erde am Rand und klopfst sie fest, *"
   sequence="100"
   sound="WateringPlace/Prepare.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du fuehrst *"
   sequence="100"
   sound="Weapons/sword_draw.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Calidus, der Wandervogel."
   sequence="100"
   sound="Misc/Calidus.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Schon * eine Macke weniger."
   omit_from_output="y"
   sequence="100"
   sound="Smith/Repair1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Da geht es nicht weiter."
   sequence="100"
   sound="Misc/Wall.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du konzentrierst Dich auf das vorzeitige Ende des Zaubers."
   send_to="12"
   sequence="95"
   sound="Spells/Stop.ogg"
  >
  <send>Spells.AnnounceEarlyCancel()</send>
  </trigger>
  <trigger
   enabled="y"
   match="Schweissueberstroemt begutachtest Du Dein fertiges Lederstueck *"
   sequence="100"
   sound="Tan/Finish3.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du kramst einen kleinen Feuerstein hervor *"
   sequence="100"
   sound="Firestarting/Start.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Sie erzittert immer oefter."
   sequence="100"
   sound="Misc/ChopHit.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du landest einen gezielten Schlag auf Deinem Rohling."
   omit_from_output="y"
   sequence="100"
   sound="Smith/hammer2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="So langsam nimmt Dein Rohling Form an."
   omit_from_output="y"
   sequence="100"
   sound="Smith/hammer2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du loeschst.*|.* loescht .*|.*erlischt.|.*erloeschen."
   regexp="y"
   sequence="100"
   sound="Misc/torch_out.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Deine Feuerkugel erlischt."
   sequence="99"
   sound="Misc/torch_out.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Deine Leuchtflamme erlischt."
   sequence="99"
   sound="Misc/torch_out.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du machst Dein * noch einmal richtig nass."
   sequence="100"
   sound="Hiker/Moisten.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="^Du faengst an, .* zu essen.$|^Du denkst Dir: Mhmmm, schmeckt das gut...$|^Du denkst Dir: Keine Frage, ein Genuss!$|^Du geniesst diese Speise in vollen Zuegen.$"
   regexp="y"
   sequence="100"
   sound="Player/Eat.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* verteil* daraufhin frustriert das ganze Holz in der Landschaft."
   sequence="100"
   sound="Firestarting/FailStart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner Funke springt auf die Holzspaene ueber, aber *"
   sequence="100"
   sound="Firestarting/FailSpark.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="einige Meter nach hinten."
   sequence="100"
   sound="Spells/lavahit3.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Feuerkristall leuchtet nun hellrot und strahlt dabei eine unheimliche*"
   sequence="100"
   sound="Cook/FireCrystal.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner See."
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/swim/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="erhaertet."
   sequence="100"
   sound="Spells/lavahit4.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Nebel loest sich allmaehlich auf."
   sequence="100"
   sound="Cook/FogOut.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Ein kleiner Wasserschwall schwappt von Deinem *"
   sequence="100"
   sound="Rune/Wave.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das Holz knackt im Lagerfeuer und einige Funken fliegen empor."
   sequence="100"
   sound="Firestarting/Sparks.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein kurzer Blick in die Pfanne verraet Dir, *"
   sequence="100"
   sound="Cook/Pan.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die Erde unter Dir beginnt zu beben."
   omit_from_output="y"
   sequence="100"
   sound="Portal/quake.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* dass sich bereits Wasser im Loch sammelt."
   sequence="100"
   sound="WateringPlace/Succeed.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Daraufhin stellst Du den Topf auf das Kochgestell *"
   sequence="100"
   sound="Cook/Cook.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die Flammen des Lagerfeuers flackern und tanzen hypnotisierend *"
   sequence="100"
   sound="Firestarting/Crackle.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Daraufhin stellst Du die Pfanne mit *"
   sequence="100"
   sound="Cook/Roast.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das Knistern des Feuers wirkt irgendwie beruhigend auf Dich."
   sequence="100"
   sound="Firestarting/Crackle.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Das Lagerfeuer ist nun voellig niedergebrannt *"
   sequence="100"
   sound="Firestarting/GoOut.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Sogleich bildet sich ein dunkelblauer Nebel ueber dem Topf, *"
   sequence="100"
   sound="Cook/Fog.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Einige Funken springen von Deinem *"
   sequence="100"
   sound="Rune/Spark.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Am Ufer eines kleinen Sees.|In den Weiten der Tundra.|In einem steinigen Landesabschnitt."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/stony/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du meinst ein leises Plaetschern zu vernehmen."
   sequence="100"
   sound="Cook/Plash.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Super! Mit praezisen Schnitten weidest Du *"
   sequence="100"
   sound="Cook/DisembowelSuccess.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match='^Vorsichtig\sglaettest\sDu\sdie\sRaender\sder\sneuen\sRune\sauf.*\Z'
   multi_line="y"
   lines_to_match="2"
   regexp="y"
   sequence="100"
   sound="Rune/Smooth.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die * Wasserstelle versiegt."
   sequence="100"
   sound="WateringPlace/GoOut.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Fast ohne Widerstand senkt sich der Stempel tief in die Presse hinein.*"
   regexp="y"
   sequence="100"
   sound="Mining/PressEmpty.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du merkst, wie vom Ofen allmaehlich eine grosse Hitze ausgeht."
   omit_from_output="y"
   sequence="100"
   sound="Mining/MeltHeatUp.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Tatsaechlich, Du hast etwas .* gefunden.|Na bitte, da ist schon etwas.|.* Du hast Mithrilerz gefunden."
   regexp="y"
   sequence="100"
   sound="Mining/HammerSucceeded.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du oeffnest *"
   sequence="101"
   sound="Misc/Open.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Tue abgebrochen."
   omit_from_output="y"
   sequence="100"
   sound="Misc/DoCancel.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du packst Dein Kochgestell aus und stellst es vor Dich hin."
   sequence="100"
   sound="Cook/Unpack.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="konzentriert."
   sequence="100"
   sound="Spells/heal.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="tiefen, feurigen Rot-Orange auf."
   sequence="100"
   sound="Spells/lavahit1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du nimmst einen * Schluck *"
   sequence="101"
   sound="Player/EatUp.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein letztes Mal abschmecken und Du bist Dir sicher, dass *"
   sequence="100"
   sound="Cook/CookFinish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du nimmst *"
   sequence="102"
   sound="Items/Take.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Die Illusion einer steinernen Faust schiesst aus *"
   sequence="99"
   sound="Rune/Stone.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Die Illusion einer Granitfaust schiesst aus *"
   sequence="99"
   sound="Rune/Granite.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Die Lichtwesen folgen Dir."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein * Mondtor steigt aus dem Boden empor."
   sequence="100"
   sound="Portal/create.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein * Mondtor verschwindet wieder spurlos im Boden."
   sequence="100"
   sound="Portal/quake.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du hoerst auf, &quot;Brems Vogellied&quot; zu spielen."
   omit_from_output="y"
   sequence="99"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Die Schlangenrune *"
   sequence="100"
   sound="Rune/Snake.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein seltsames Haus."
   sequence="100"
   sound="Misc/Zwoni.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du legst * in das kochende Wasser *"
   sequence="99"
   sound="Cook/Boiling2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Die rote Nebelwolke beginnt sich ploetzlich aufzuloesen."
   sequence="100"
   sound="Cook/FogOut.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein tiefer Kratzer in .* muss .*"
   sequence="100"
   regexp="y"
   sound="Smith/Repair2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dir rutscht Geroell entgegen."
   omit_from_output="y"
   sequence="100"
   sound="Mining/DigRocks.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex naehert sich von *"
   sequence="100"
   sound="Monsters/Vortex/Appear.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Fertig. Dein Feuerkristall erlischt und Du packst alles wieder ein. *"
   sequence="99"
   sound="Cook/RoastFinish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex wirbelt ein wenig von *"
   sequence="100"
   sound="Monsters/Vortex/Swirl1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Funken spruehen bei Deinen Schlaegen auf den harten Fels."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Funken stieben aus dem Lagerfeuer."
   sequence="100"
   sound="Firestarting/Sparks.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du probierst ein bisschen von *"
   sequence="100"
   sound="Cook/Try.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Gar nicht so einfach."
   omit_from_output="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du pruefst die Tiefe und beschliesst noch * nachzugraben."
   sequence="100"
   sound="WateringPlace/Dig2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Geblendet vom herabstroemenden Schweiss kneifst Du Deine Augen in einem*"
   sequence="100"
   sound="Tan/Tear.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du ruehrst * um."
   sequence="100"
   sound="Cook/Stir.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du schabst fleissig weiter."
   sequence="100"
   omit_from_output="y"
   sound="Tan/Scrape2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du befeuchtest Dein *"
   sequence="100"
   sound="Hiker/Moisten.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du befreist Dich aus dem Schlamm."
   omit_from_output="y"
   sequence="100"
   sound="Mining/DigMud.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Eine Stichflamme schiesst aus *"
   sequence="100"
   sound="Rune/Fire.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex wuselt flink um *"
   sequence="100"
   sound="Monsters/Vortex/Swirl2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst damit, ein Lagerfeuer zu errichten."
   sequence="100"
   sound="Firestarting/Begin.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Eine Wasserfontaene schiesst aus *"
   sequence="100"
   sound="Rune/Flood.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst das Stueck Haut mit dem Gerbermesser abzuschaben."
   sequence="100"
   omit_from_output="y"
   sound="Tan/Scrape1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* erscheint aus dem Mondtor."
   sequence="100"
   sound="Portal/apear.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst mit dem Wuehlen nach *kohle."
   omit_from_output="y"
   sequence="100"
   sound="Mining/CoalBegin.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* erzittert unter den heftigen Hieben."
   sequence="100"
   sound="Misc/ChopHit.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bist gerade fertig, den Rand zu befestigen, da rutscht auch wieder alles"
   sequence="100"
   sound="WateringPlace/Colapse.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* erzittert unter den heftigen Schlaegen."
   sequence="100"
   sound="Misc/ChopHit.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Hand wieder."
   sequence="100"
   sound="Spells/firebeam4.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Handflaechen beginnen zu leuchten und zu funkeln."
   sequence="100"
   sound="Spells/heal2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du schlaegst Dein Werkzeug in das Gestein."
   omit_from_output="y"
   sequence="100"
   sound="Mining/DigTool.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Hier scheint wirklich Mithrilerz im Gestein zu sein."
   sequence="100"
   sound="Mining/HackSucceed2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du schliesst *"
   sequence="102"
   sound="Misc/Close.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Himmel und verschwindet dort."
   sequence="100"
   sound="Spells/lavahit2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du schneidest ein Stueck zur Bearbeitung aus Deiner Tierhaut."
   sequence="100"
   omit_from_output="y"
   sound="Tan/Cut.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du senkst *"
   sequence="100"
   sound="Weapons/Sword_Sheath.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du setzt * ab."
   sequence="100"
   sound="Player/offhead.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Du zeichnest vorsichtig die Rune auf * vor."
   omit_from_output="y"
   sequence="100"
   sound="Rune/Chart.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du zerteilst * mit * in *"
   sequence="100"
   sound="Misc/WoodSplit.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="* Voegel stuerz* auf * herab.*"
   sequence="100"
   sound="Bard/Birds_Attack.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du ziehst * an."
   sequence="100"
   sound="Player/Wear.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst mit der Mineraliensuche.|Du beginnst mit der Suche nach .*erz."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   sound="Mining/HammerBegin.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Eine kaum ertraegliche Hitze stroemt aus dem Nebel."
   sequence="100"
   sound="Cook/Heat.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du ziehst * aus."
   sequence="100"
   sound="Player/Unwear.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst mit der Arbeit. Es ist gar nicht so einfach hier *erz *"
   sequence="100"
   sound="Mining/HackSucceed1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Eine kleine, freche Fliege will an Dein Essen, *"
   sequence="100"
   sound="Cook/Fly.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* faellt bestimmt bald um."
   sequence="100"
   sound="Misc/ChopHit.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beginnst zu graben."
   omit_from_output="y"
   sequence="100"
   sound="Mining/DigBegin.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Eine rote Nebelwolke bildet sich ueber dem Boden und umschliesst den*"
   sequence="100"
   sound="Cook/Fog.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* fluechtet sichtlich verstoert nach *"
   sequence="100"
   sound="Monsters/Flee.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du beobachtest ein wenig den Funkenflug des Lagerfeuers."
   sequence="100"
   sound="Firestarting/Sparks.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* in dem Lagerfeuer in * auf."
   sequence="100"
   sound="Firestarting/burst.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du betrittst ein * Mondtor."
   sequence="100"
   sound="Portal/enter portal.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* gibt Dir *"
   sequence="100"
   sound="Items/Get.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Hm. Viel ist da nicht zu sehen."
   omit_from_output="y"
   sequence="100"
   sound="Mining/HammerFail.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* hat gut geschmeckt."
   sequence="100"
   sound="Player/EatUp.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Hoffentlich findet sich etwas.|Das geht ja wirklich gut."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   sound="Mining/HammerSucceed.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Hoffentlich wird das was...|Das wird wirklich was..."
   omit_from_output="y"
   regexp="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du setzt * auf."
   sequence="100"
   sound="Player/head.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Hoi, das sieht doch schon wie .*kohle aus.|Nach was richtig Ordentlichem sieht das nicht aus."
   omit_from_output="y"
   regexp="y"
   sequence="100"
   sound="Mining/CoalSucceed.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du spaltest das Brennholz in kleinere Scheite."
   sequence="100"
   sound="Firestarting/Split.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du spielst eine leichte Melodie auf *, mit der Du bei*"
   sequence="99"
   sound="Bard/Grats.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du spielst * auf Dein*"
   sequence="100"
   sound="Bard/Sing.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du singst * ohne instrumentale Unterstuetzung*"
   omit_from_output="y"
   sequence="100"
   sound="Bard/Sing_Vocal.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du spuckst Dir in die Haende."
   sequence="100"
   sound="Spells/light1b.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Du spuerst, wie die Magie von Deinem * Dir die *"
   sequence="100"
   sound="Rune/Vampire.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="Ein Blitz schiesst aus *"
   sequence="100"
   sound="Rune/Lightning.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bewegst Deine Haende auf mystische Weise."
   sequence="100"
   sound="Spells/light2a.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bildest mit dem * Luftvortex eine neue Gruppe."
   sequence="100"
   sound="Monsters/Vortex/Group.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein Feuerstrahl schiesst auf * zu."
   sequence="100"
   sound="Spells/firebeam2.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* kippt bestimmt bald um."
   sequence="100"
   sound="Misc/ChopHit.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du breitest Deine Arme aus."
   sequence="100"
   sound="Spells/light3a.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* in dem Lagerfeuer."
   sequence="100"
   sound="Firestarting/Crackle.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du drueckst den langen Hebel nach oben. Ohne Widerstand folgt er Dein*"
   sequence="100"
   sound="Mining/PressRelease.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* recht beschaedigt."
   sequence="100"
   sound="Smith/Damaged.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du entzuendest.*|.*entzuendet.*"
   regexp="y"
   send_to="12"
   sequence="100"
   sound="Misc/torch_on.ogg"
  >
  <send>atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   match="In dem Kochtopf befindet sich jetzt erstaunlicherweise kochendes Wasser *"
   sequence="100"
   sound="Cook/Boiling1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* schwer beschaedigt."
   sequence="100"
   sound="Smith/HeavyDamaged.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="In einem Stollen.|In einer grossen Hoehle."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/cave/"..math.random(1,4)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="In einer trostlosen Steppe."
   send_to="12"
   sequence="100"
  >
  <send>Sound.PlaySound("Footsteps/Steppy/"..math.random(1,10)..".ogg")</send>
  </trigger>
  <trigger
   enabled="y"
   match="Du steckst *"
   sequence="100"
   sound="Weapons/Sword_Sheath.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du stellst die Holzstuecke zu einer kleinen Holzpyramide auf und *"
   sequence="100"
   sound="Firestarting/Build.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Kleine Luftblaeschen steigen aus dem Topf auf."
   sequence="100"
   sound="Cook/bubble.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du stimmst eine dunkle, getragene Totenklage *"
   sequence="100"
   sound="Bard/Burial.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du streckst Deine Hand nach vorn."
   sequence="100"
   sound="Spells/firebeam1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du summst eine kleine Melodie, die Dir gerade so eingefallen ist."
   sequence="100"
   sound="Cook/Melody.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein Klumpen Metall faellt scheppernd in das Auffangbecken."
   sequence="100"
   sound="Mining/MeltFinish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du erzeugst Dir eine kleine Feuerkugel."
   sequence="100"
   send_to="12"
   sound="Misc/torch_on.ogg"
  >
  <send>atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   ignore_case="y"
   keep_evaluating="y"
   match="^Du legst .*$|^.* legt .* hin.$"
   regexp="y"
   sequence="95"
   sound="Items/Put.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* schwingt immer mehr hin- und her."
   sequence="100"
   sound="Misc/ChopHit.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du erzeugst Dir eine kleine Leuchtflamme."
   sequence="100"
   send_to="12"
   sound="Misc/torch_on.ogg"
  >
  <send>atcp.Send('ava_req_mapper')</send>
  </trigger>
  <trigger
   enabled="y"
   match=".* wurde von dem Febron * getoetet\.|.* hat .* getoetet\."
   regexp="y"
   sequence="2"
   sound="Monsters/Vortex/Kill.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* Luftvortex hat * getoetet."
   sequence="2"
   sound="Monsters/Vortex/Kill.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* wackelt immer mehr."
   sequence="100"
   sound="Misc/ChopHit.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Auroras Lag&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Lag.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Luftvortex loest sich auf als Du ihm seinen Kern geraubt hast.*"
   sequence="2"
   send_to="12"
   sound="Monsters/Vortex/Disintegrate.ogg"
  >
  <send>world.Execute("stecke streitaxt in meinen rucksack")</send>
  </trigger>
  <trigger
   enabled="y"
   match="*[Gruppe]*"
   keep_evaluating="y"
   sequence="100"
   sound="Misc/group.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* moechte mit Dir eine Gruppe bilden."
   sequence="100"
   sound="Misc/group.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* moechte sich Deiner Gruppe anschliessen."
   sequence="100"
   sound="Misc/group.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* schliesst sich Deiner Gruppe an."
   sequence="100"
   sound="Misc/group.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du bildest mit * eine neue Gruppe."
   sequence="100"
   sound="Misc/group.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Brems Vogellied&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Birds_Start.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match=".* gibt Dir .* (Lapis|Obsidian|Konochen).*"
   regexp="y"
   sequence="99"
   sound="Items/GetMoney.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Runenschmiede"
   match="*Sie ist kaum noch zu erkennen*"
   sequence="100"
   sound="Rune/Bad.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du gibt Dir die beste Muehe, * zu faellen.*"
   sequence="99"
   sound="Misc/ChopContinue.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Langsam senkt sich der Stempel in die Presse hinein. Du hoerst das|Kreischen sich verformenden Metalls."
   omit_from_output="y"
   regexp="y"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du gibst *"
   sequence="100"
   sound="Items/Give.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Laut scheppernd faellt ein fertiger Rohling unten aus der Presse heraus *"
   sequence="100"
   sound="Mining/PressFinish.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du graebst eine tiefe Mulde mit dem Hirschfaenger in den Boden."
   sequence="100"
   sound="WateringPlace/Dig1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Leider bist Du viel zu unkonzentriert und verschneidest Dich dermassen oft*"
   sequence="100"
   sound="Cook/DisembowelFail.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du waehlst ein geeignetes Messer aus Deinen Kochutensilien aus."
   sequence="100"
   sound="Cook/Disembowel1.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du graebst und graebst..."
   omit_from_output="y"
   sequence="100"
   sound="Mining/DigContinue.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Leise ist aus der Schmelzanlage ein Blubbern zu hoeren*"
   sequence="100"
   sound="Mining/MeltBubble.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du wendest (das|den|die) .*"
   regexp="y"
   sequence="100"
   sound="Cook/Turn.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du greifst * mit *"
   sequence="100"
   sound="Player/Attack.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mist, mit .* laesst sich hier wohl nichts mehr.*|Mist. Hier laesst sich wohl nichts mehr schuerfen."
   regexp="y"
   sequence="100"
   sound="Mining/Empty.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du wickelst Dein Buendel aus."
   sequence="100"
   sound="Hiker/Open.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du haelst den Feuerstrahl weiterhin aufrecht."
   sequence="100"
   sound="Spells/firebeam3.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du wickelst Dein Buendel sorgfaeltig wieder ein."
   sequence="100"
   sound="Hiker/Close.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du wringst Dein feuchtes * kraeftig aus."
   sequence="100"
   sound="Hiker/WringOut.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein Pfad, er verlaeuft von * nach *."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>%1, %2</send>
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Fabians Gnade&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Heal.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Grinwells Stimme im Geist&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Hypnosis.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* ist Dir entkommen."
   sequence="100"
   sound="Player/HuntAbort.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du brichst die Verfolgung ab."
   sequence="100"
   sound="Player/HuntAbort.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Josuas Rattenfaengerlied&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Catcher.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="(Der|Die|Das) .* ist fertig.|(Der|Die|Das) .* sind fertig."
   regexp="y"
   sequence="100"
   sound="Smith/complete.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Barden"
   match="Du faengst an, &quot;Kakos Missklang&quot; auf * zu spielen."
   sequence="100"
   sound="Bard/Dissonance.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="*Du hast Braunkohle gefunden."
   sequence="100"
   sound="Mining/CoalSucceeded.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="* schiess* auf *"
   sequence="100"
   sound="Weapons/arrow.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du kannst nicht mehr genug Deiner magischen Energie entbehren, um Deinen Speer weiterhin damit zu versorgen."
   sequence="100"
   sound="Player/waldtraene/forceend.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du spuerst, wie die Waldtraene von Deiner magischen Kraft zehrt."
   omit_from_output="y"
   sequence="100"
   sound="Player/waldtraene/sendzp.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du spuerst, wie Deine magische Energie schwindet. Sie scheint sich in*"
   sequence="100"
   sound="Player/waldtraene/startzp.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="'Waldtraene' ist nun voll mit magischer Energie geladen."
   sequence="100"
   sound="Player/waldtraene/fullzp.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Traenen gleich fliessen Tropfen goldenen Lichtes ueber die Blaetter .* auf .* zu\.|Sie scheinen .* fuerchterliche Schmerzen zu bereiten\."
   regexp="y"
   omit_from_output="y"
   sequence="100"
   send_to="12"
  >
  <send>Sound.PlaySound("Weapons/waldtraene/"..math.random(1,8)..".ogg")</send>
  </trigger>
  <trigger
   match="'Waldtraene' zittert in Deiner Hand. Du fuerchtest, sie koennte zerbersten!"
   enabled="y"
   sequence="100"
   sound="Player/waldtraene/vibration.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Jemand klopft von draussen laut gegen die *!"
   sequence="100"
   sound="Misc/DoorKnock.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Mutigen Schrittes trittst Du durch die schwarze, glitzernde Wand."
   sequence="100"
   sound="Portal/ShadowWall.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Insgesamt warst Du * in Avalon."
   sequence="100"
   send_to="12"
   sound="Misc/out.ogg"
  >
  <send>
  if hmusic ~= nil then
    hmusic:Stop()
  end
  </send>
  </trigger>
  <trigger
   enabled="y"
   match="* hat einen neuen Abenteuerbericht verfasst."
   sequence="100"
   sound="Misc/Report.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein kleiner, roter Briefkasten (Post ist da!)."
   sequence="100"
   sound="Player/LetterBox.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Echos des grossen Krieges"
   sequence="100"
   sound="WarEchoes/Advance.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Vergiss Deine Kriegsbeute nicht"
   sequence="100"
   sound="WarEchoes/Loot.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Kriegsbeute fuer Deine bisherigen Bemuehungen"
   sequence="100"
   sound="WarEchoes/Loot.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dafuer hast Du leider nicht genug Zauberpunkte."
   sequence="100"
   sound="Spells/OutOfSpellPower.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du brichst Dein Dauerzaubern ab."
   sequence="100"
   sound="Spells/EndOfContinuousSpell.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Ein riesiger Obelisk."
   sequence="100"
   sound="Misc/Obelisk.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Nekromanten"
   match="Du ziehst Dir Deine Kutte tief ins Gesicht."
   sequence="100"
   sound="Necromancers/Cowl.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Nekromanten"
   match="Du sinkst, Beschwoerungen murmelnd, auf die Knie."
   sequence="100"
   sound="Necromancers/BoneShield2.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Nekromanten"
   match="Du ordnest einige Knochen auf dem Boden an und rammst Deinen Ritualdolch in"
   sequence="100"
   sound="Necromancers/BoneShield3.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Nekromanten"
   match="Zusaetzliche Knochen schiessen aus dem Boden hervor und wirbeln um Dich"
   sequence="100"
   sound="Necromancers/BoneShield4.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Nekromanten"
   match="Du erhebst Dich wieder, der wirbelnde Schild aus Knochen umgibt Dich"
   sequence="100"
   sound="Necromancers/BoneShieldOn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Nekromanten"
   match="Deine schuetzende Knochenwolke loest sich auf."
   sequence="100"
   sound="Necromancers/BoneShieldOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Dazugelernt!"
   sequence="100"
   sound="Misc/SkillGain.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du erstarrst."
   sequence="100"
   sound="Player/Statue.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du schliesst Deine Augen und atmest tief durch."
   sequence="99"
   sound="Clerics/Meditation1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du ziehst die Kapuze Deiner Robe weit ueber den Kopf und faltest Deine"
   sequence="100"
   sound="Clerics/Meditation2.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="^Leise summst Du ein Mantra, das Dir zu neuer Kraft verhilft.$|^Du summst: Ooooohhhhhmmmmmm......$"
   regexp="y"
   sequence="100"
   send_to="12"
  >
  <send>Sound.PlaySound("Clerics/Hum/"..math.random(1,4)..".ogg")</send>
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Deine Ordenskette leuchtet schwach auf."
   sequence="100"
   sound="Clerics/Meditation4.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du beginnst zu meditieren."
   sequence="100"
   sound="Clerics/Meditation5.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Langsam wachst Du wieder auf."
   sequence="100"
   sound="Clerics/MeditationOff.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du nimmst ein Stueck Kohle und beginnst, ein schwarzes Ankh auf Dein*"
   sequence="99"
   sound="Clerics/Armor1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Sorgfaeltig malst Du ein T-Kreuz auf *"
   sequence="100"
   sound="Clerics/Armor2.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Ueber der Gabelung malst Du einen Kreis."
   sequence="100"
   sound="Clerics/Armor3.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Dabei murmelst Du einige heilige Worte."
   sequence="100"
   sound="Clerics/Armor4.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Schliesslich streichst Du mit dem Ankh Deiner Kette ueber *"
   sequence="100"
   sound="Clerics/Armor5.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Das Ankh auf * beginnt, schwach zu leuchten."
   sequence="100"
   sound="Clerics/ArmorOn.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Dein* verliert * magische Kraft."
   sequence="100"
   sound="Clerics/ArmorOff.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du wendest das Ankh Deiner Ordenskette auf Deinen Koerper."
   sequence="99"
   sound="Clerics/CurePoison1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du legst eine Hand auf Deine Schlaefe und atmest tief durch."
   sequence="93"
   sound="Clerics/CurePoison1.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du hast es geschafft, das Gift in Deinem Koerper zu unterdruecken."
   sequence="100"
   sound="Clerics/CurePoison4.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Du faellst vor der Leiche auf die Knie, legst Dein Ankh auf den leblosen"
   sequence="100"
   sound="Clerics/Resurrect_Start.ogg"
  >
  </trigger>
  <trigger
   enabled="n"
   group="Kleriker"
   match="Deine Bemuehungen waren erfolgreich. * schlaegt*"
   sequence="100"
   sound="Clerics/Resurrect_Success.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Du schlaegst Deine Augen auf und versuchst etwas zu sagen."
   sequence="100"
   sound="Clerics/Resurrect_Success.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Erledigt. Du hast nun diesen Gegner * mal hintereinander getoetet."
   sequence="100"
   sound="Misc/TaskProgress.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Eine Langstreckenbrieftaube kommt angeflogen und laesst einen kleinen Brief"
   sequence="100"
   sound="Misc/PostPigeon.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="Der Kopf klatscht leblos herab und ruehrt sich zum Glueck nicht mehr."
   sequence="100"
   sound="Monsters/HydraBehead.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Nekromanten"
   match="Der Fluch der Stille, der auf *"
   sequence="100"
   sound="Necromancers/SilenceOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Nekromanten"
   match="Der Fluch der Traegheit, der auf *"
   sequence="100"
   sound="Necromancers/LethargyOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Nekromanten"
   match="Der Fluch des Schwarzen Kusses, der auf *"
   sequence="100"
   sound="Necromancers/KissOff.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="            Aufgabe fertig                                     "
   sequence="100"
   sound="Misc/NPCTaskComplete.ogg"
  >
  </trigger>
  <trigger
   enabled="y"
   match="*Du bist soeben eine Stufe aufgestiegen*"
   sequence="100"
   sound="Misc/SubLevelUp.ogg"
  >
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   match="repeatcommand_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>repeatcommand_switch()</send>
  </alias>
  <alias
   match="numpad"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>NumpadSwitch()</send>
</alias>
  <alias
   match="dli"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('PrintList')</send>
</alias>
  <alias
   match="zvs *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Verschmelzung', "%1")</send>
</alias>
  <alias
   match="vg *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Vergesse', "%1")</send>
</alias>
  <alias
   match="el *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Erloese', "%1")</send>
</alias>
  <alias
   match="dbw *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Bewerte', "%1")</send>
</alias>
  <alias
   match="zgp *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Gedankenpeitsche', "%1")</send>
</alias>
  <alias
   match="bwv * *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Waffenverstaerkung', "%1", "%2")</send>
</alias>
  <alias
   match="brv * *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Ruestungsverstaerkung', "%1", "%2")</send>
</alias>
  <alias
   match="bbs * *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Beschuetze', "%1", "%2")</send>
</alias>
  <alias
   match="bnm * *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Name', "%1", "%2")</send>
</alias>
  <alias
   match="zw *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Wegschicken', "%1")</send>
</alias>
  <alias
   match="zh *"
   group="Daemonenkrieger"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>Gilden.Call('Hervorrufen', "%1")</send>
</alias>
  <alias
   match="ef([1-5]) (an\w*|st\w*|de\w*|of\w*|fu\w*|sc\w*|au\w*)"
   group="Hyraskrieger"
   enabled="n"
   send_to="12"
   sequence="100"
   regexp="y"
  >
  <send>Gilden.Call('Evoliere', "%1", "%2")</send>
</alias>  
  <alias
   match="rausl *"
   group="Spiele_Hajo"
   enabled="n"
   send_to="12"
   sequence="100"
  >
  <send>world.Execute("rauslegen %1")</send>
</alias>
  <alias
   match="pos"
   enabled="y"
   send_to="12"
   sequence="100"
   keep_evaluating="y"
  >
  <send>print_position()</send>
</alias>
  <alias
   match="switch_mute"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>switch_mute()</send>
</alias>
  <alias
   match="switch_fullmute"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>switch_fullmute()</send>
</alias>
  <alias
   match="volumetype_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>volumetype_switch()</send>
</alias>
  <alias
   match="spbar_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>spbar_switch()</send>
</alias>
  <alias
   match="apbar_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>apbar_switch()</send>
</alias>
  <alias
   match="tpbar_switch"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>tpbar_switch()</send>
</alias>
  <alias
   match="volume_up"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>volume(5)</send>
</alias>
  <alias
   match="volume_down"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  <send>volume(-5)</send>
</alias>
  <alias
   match="az"
   enabled="y"
   send_to="10"
   sequence="100"
  >
  <send>timer</send>
</alias>
  <alias
   match="^!(.*?)$"
   enabled="y"
   send_to="12"
   sequence="100"
   regexp="y"
  >
  <send>warnings_access("%1")</send>
</alias>
  <alias
   match="janis"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Dolphinia</send>
  </alias>
  <alias
   match="janiso"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Lorinand</send>
  </alias>
  <alias
   match="janisw"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Tolsgal</send>
  </alias>
  <alias
   match="janiw"
   enabled="y"
   send_to="2"
   sequence="100"
  >
  <send>Losaria</send>
  </alias>
  <alias
   match="foien"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Alotria</send>
  </alias>
  <alias
   match="foieno"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Orkland</send>
  </alias>
  <alias
   match="foienw"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Sanduz</send>
  </alias>
  <alias
   match="foieo"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Abtei</send>
  </alias>
  <alias
   match="foies"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Corona</send>
  </alias>
  <alias
   match="foieso"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Zwergental</send>
  </alias>
  <alias
   match="foiesw"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Minias</send>
  </alias>
  <alias
   match="foiew"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Ashar</send>
  </alias>
  <alias
   match="janin"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Unbekannt</send>
  </alias>
  <alias
   match="janino"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Amphibos</send>
  </alias>
  <alias
   match="janinw"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Holbytla</send>
  </alias>
  <alias
   match="janio"
   enabled="y"
   send_to="2"
   sequence="100"
   >
  <send>Tintagel</send>
  </alias>
  <alias
   match="say_ap"
   enabled="y"
   send_to="12"
   sequence="100"
   >
  <send>say_stat("AP")</send>
  </alias>
  <alias
   match="say_mp"
   enabled="y"
   send_to="12"
   sequence="100"
   >
  <send>say_stat("MP")</send>
  </alias>
  <alias
   match="say_tp"
   enabled="y"
   send_to="12"
   sequence="100"
   >
  <send>say_stat("TP")</send>
  </alias>
  <alias
   match="say_zp"
   enabled="y"
   send_to="12"
   sequence="100"
   >
  <send>say_stat("ZP")</send>
  </alias>
</aliases>

<!--  Script  -->

<script>
<![CDATA[
Audio = require("audio")
atcp=nil
Dunkel=0
g_combat           = nil
g_combat_music     = nil
g_combat_music_name= nil
apfullannounced=false
spfullannounced=false
tpfullannounced=false
hdksnd=nil
hmusic=nil
LastCommand=nil
mxp_output=false
PlayerEP = nil
PlayerLevel=nil
RoomID=nil
RoomName=''
volumetype=1

callbacktbl={}
configtbl={}
configtbl.settings={}
configtbl.settings.SoundVolume=100
configtbl.settings.MusicVolume=10
configtbl.settings.CombatMusicVolume=10
configtbl.settings.TPBar=1
configtbl.settings.SPBar=1
configtbl.settings.APBar=1
configtbl.settings.SoundsMuted=0
configtbl.settings.MusicMuted=0
configtbl.settings.CombatMusicMuted=0
configtbl.settings.NumpadWalk=1
configtbl.settings.RepeatCommand=0
configtbl.settings.MXP=0
configtbl.settings.FirstRun = 1
configtbl.messagebox={}
configtbl.messagebox.echo="false"
world.Accelerator("F2", "tpbar_switch")
world.Accelerator("F3", "spbar_switch")
world.Accelerator("F4", "apbar_switch")
world.Accelerator("F6", "repeatcommand_switch")
world.Accelerator("F9", "volume_down")
world.Accelerator("F10", "volume_up")
world.Accelerator("F11", "volumetype_switch")
world.Accelerator("ctrl+F11", "switch_mute")
world.Accelerator("ctrl+shift+F11", "switch_fullmute")
world.Accelerator("alt+k", "say_ap")
world.Accelerator("alt+m", "say_mp")
world.Accelerator("alt+t", "say_tp")
world.Accelerator("alt+z", "say_zp")
world.AcceleratorTo('Decimal','NumpadSwitch()',12)
Gilden = require("avalon.gilden")
Player = require("avalon.player")()
Sound = require("avalon.sound")
Spells = require("avalon.activespells")
require("avalon.multilinetrigger")
require("pairsbykeys")
Dir = require('pl.dir')
File = require('pl.file')
Ini = require("ini")
Path = require("pl.path")
PPI = require("ppi")
Tablex = require("pl.tablex")
Timers = nil
Spells.Register("Sternenstaub","Du wirst von Sternenstaub umgeben\\.","Dein Sternenstaub loest sich auf\\.", true)
Spells.Register("Magieaufladung","Du hast einen Teil Deiner regenerativen Energien in Deine Zauber umgelenkt\\.","Deine Energien fliessen wieder normal\\.")
Spells.Register("Erdaura","Du hebst Deine Haende, beschreibst einen Halbkreis.*|Die Partikel verdichten sich um Dich\\.","Dein Staubschleier loest sich auf\\.")
Spells.Register("Luftaura","Du bist in den Watteflocken kaum noch auszumachen\\.","Deine Watteflocken loesen sich auf\\.")
Spells.Register("Wasseraura","Es regnet aus der Wolke auf Dich herab.*","Dein Wasserschleier loest sich auf\\.")
Spells.Register("Todesaura","Du senkst Deine Haende, aber der Schutz der schwarzen Schleier.*|Die schwarzen Schleier verdichten sich um Dich\\.","Deine Todesaura loest sich auf\\.")
Spells.Register("Feueraura","Du senkst Deine Haende, aber der Schutz der Manawolken.*|Die Manawolken verdichten sich um Dich\\.","Deine Feueraura loest sich auf\\.")
Spells.Register("Kampfbeschwoerung","Du wirst von einer heiligen Aura umgeben\\.","Deine heilige Aura loest sich auf\\.", true)
Spells.Register("Kernschild","Das Glitzern legt sich als schuetzendes Schild ueber Dich\\.","Dein Kernschild loest sich auf\\.", true)
Spells.Register("Knochenschild","Du erhebst Dich wieder, der wirbelnde Schild aus Knochen umgibt Dich","Deine schuetzende Knochenwolke loest sich auf\\.", true)
Spells.Register("Steinhaut","Du bist nun vollkommen in eine Steinhaut eingehuellt, .*",".*Du befreist Dich von Deiner Steinhaut.*|.*Deine Steinhaut loest sich auf.*|Das hat Deiner Steinhaut den letzten Rest gegeben, sie loest sich auf\\.", true)
Spells.Register("Schild","Du wirst von einem magischen Schild umgeben\\.","Dein magischer Schild loest sich auf\\.", true)
Spells.Register("Licht","Ein grosser Lichtbogen breitet sich ueber Deinem Kopf aus\\.|Du erzeugst Dir eine kleine Feuerkugel\\.|Du erzeugst Dir eine kleine Leuchtflamme\\.","Dein Lichtbogen verschwindet\\.|Deine Feuerkugel erlischt\\.|Deine Leuchtflamme erlischt\\.")
Spells.Register("Arkanschild","Du wirst von einem Arkanschild umgeben\\.","Dein Arkanschild loest sich auf\\.", true)
Spells.Register("Manarausch","Dichte Manawolken bilden nun einen gewaltigen Schutz um Dich herum\\.","Dein Manarausch laesst wieder nach\\.")
Spells.Register("Magiertrance","Du sinkst in tiefe Trance\\.","Du erwachst aus Deiner Trance\\.")
Spells.Register("Windhaut","Du bist nun vollkommen in eine Windhaut eingehuellt\\.","Deine Windhaut loest sich auf\\.")
Spells.Register("Daemonenhaut","Du bist nun vollkommen in eine Daemonenhaut eingehuellt\\.","Deine Daemonenhaut loest sich auf\\.")
Spells.Register("Lebensaura","Du oeffnest die Augen, aber der Schutz der Bluetenblaetter umgibt Dich","Deine Lebensaura loest sich auf\\.")
Spells.Register("Schwarzschild","Du wirst von einem magischen Schild umgeben, der Dich besser parieren","Dein Schwarzschild loest sich auf\\.", true)
Spells.Register("Weissschild", "Du wirst von einem magischen Schild umgeben, der Dich Deinen Gegner .*", "Dein Weissschild loest sich auf\\.", true)
Spells.Register("Holzhaut", "Deine Haut sieht nun hoelzern und sehr widerstandsfaehig aus\\.|Deine Blaetterhaut sieht nun hoelzern und sehr widerstandsfaehig aus\\.|Deine Blaetterhaut fuehlt sich nun recht hoelzern an\\.|Deine Haut fuehlt sich nun recht hoelzern an\\.", "Deine Holzhaut loest sich auf\\.", true)
Spells.Register("Blaetterhaut", "Deine Haut ist nun mit Blaettern bedeckt, die Dir ein angenehmes Klima|Deine Holzhaut ist nun mit Blaettern bedeckt, die Dir ein angenehmes Klima", "Deine Blaetterhaut loest sich auf\\.")
Spells.Register("Pflanzenblick", "Du siehst die Pflanzen um Dich herum jetzt viel klarer\\.", "Dein besonderer Blick fuer die Pflanzen an Deinem Weg verschwindet wieder\\.")
Spells.Register("Friedfertigkeit", "Du fuehlst Dich nun .* friedfertig\\.", "Du fuehlst Dich wieder kaempferischer, ungestuemer\\.")
Spells.Register("Kampfeslust", "Du bekommst so langsam richtig Lust auf ein kleines Kraeftemessen\\.", "Du fuehlst Dich wieder ruhiger, besonnener\\.")
Spells.Register("Todkonvertieren", "Du wirst von einem heiligen Schutz umgeben\\.", "Dein heiliger Schutz loest sich auf\\.")
Spells.Register("Zorn", "Du wirst von kuehlen Winden umgeben\\.", "Die kuehlen Winde, welche Dich umgeben, verschwinden\\.")
Spells.Register("Kampfsegen", "Du bist motiviert und willig zu kaempfen\\.", "Deine Motivation und Dein Kampfeswille schwinden\\.")
Spells.Register("Trotz", "Du hast nun verbesserte Verteidigungsfertigkeiten\\.", "Deine verbesserten Verteidigungsfertigkeiten schwinden\\.")
Spells.Register("Vergeltung", "Du oeffnest Deine Augen und buendelst Deine Wut\\.", "Die Wut in Dir scheint besiegt\\.")
Spells.Register("Blutrausch", "Du laesst einen fuerchterlichen Urschrei von Dir. Es scheint so, als .*", "Die roetlichen Manawolken loesen sich auf\\.")

function OnAvalonGrafikVermeiden(type, message)
  if tonumber(message) == 1 then
    config_graphics(false)
  else
    config_graphics(true)
  end
end

function OnAvalonGilde(type, message)
  call_callback("GILDE", message)
end

function OnAvalonLogin()
  atcp.Send("ava_set_soundpack")
  atcp.Send("ava_set_channel 1")
  atcp.Send("ava_set_rcomm 1")
  atcp.Send("ava_set_comm 1")
  atcp.Send("ava_set_soul 1")
  atcp.Send("ava_set_rsoul 1")
  atcp.Send("ava_req_update")
  atcp.Send("ava_req_graphics_status")
  Sound.PlaySound("Player/Login.ogg")
  call_callback('LOGIN')
end

OnAvalonGetoetet = function(type, message)
  if (type == "Avalon.Getoetet") then
    Sound.PlaySound("Player/Kill.ogg")
  elseif (type == "Avalon.GruppeGetoetet") then
    Sound.PlaySound("Monsters/Kill.ogg")
  end
  Sound.PlaySound("monsters/deaths/"..math.random(1,57)..".ogg")
end

OnAvalonKampf = function(type, message)
  if (message == "1") then
    g_combat = true
    combat_music()
  elseif (message == "0") then
    g_combat = false
    combat_music()
  end
end

OnAvalonDunkel = function(type, message)
  Dunkel = tonumber(message)
  call_callback('DUNKEL', Dunkel)
end

OnAvalonRSoul = function(type, message)
  channel, text = string.match(message, "^(%[?%w+%-?%w*%-?%w*%]?) (.*)$")
  text=string.gsub(text,"%%%^%w+_*%w*%%%^(.*)%%%^NO_*%w+%%%^","%1",10)
  world.Execute(";history_add REDEN="..world.Replace(text,'\n',',',true))
  call_callback('CHANNEL', channel, text)
end

OnAvalonSoul = function(type, message)
  channel, text = string.match(message, "^(%[?%w+%-?%w*%-?%w*%]?) (.*)$")
  if not text then
    startpos, endpos = string.find(message, " ", 1, true)
    text = string.sub(message, endpos+1, -1)
  end
  text=string.gsub(text,"%%%^%w+_*%w*%%%^(.*)%%%^NO_*%w+%%%^","%1",10)
  world.Execute(";history_add SAGEN="..world.Replace(text, "\n", " ", true))
end

OnAvalonComm=function(type,message)
  channel, text = string.match(message, "^(%[?%w+%-?%w*%-?%w*%]?) (.*)$")
  text=string.gsub(text,"%%%^%w+_*%w*%%%^(.*)%%%^NO_*%w+%%%^","%1",10)
  if (Path.exists(GetInfo(74).."Channels/"..channel..".ogg")) then
    Sound.PlaySound("Channels/"..channel..".ogg")
  end
  world.Execute(";history_add "..channel.."="..world.Replace(text, "\n", " "))
  call_callback('CHANNEL', channel, text)
end

OnAvalonChannel = function(type, message)
  channel, text = string.match(message, "^(%[?%w+%-?%w*%-?%w*%]?) (.*)$")
  text=string.gsub(text,"%%%^%w+_*%w*%%%^(.*)%%%^NO_*%w+%%%^","%1",10)
  if Gilden.Exists(channel) then
    channel="gilde"
  end
  if (Path.exists(GetInfo(74).."Channels/"..channel..".ogg")) then
    Sound.PlaySound("Channels/"..channel..".ogg")
  end
  if ((channel == "fehler") or (channel == "runtime")) then
    return
  end
  world.Execute(";history_add "..channel.."="..text)
  call_callback('CHANNEL', channel, text)
end

OnAvalonRoomID = function(type, message)
  tmessage = utils.split(message, " ")
  id = tmessage[1]
  name = tmessage[2]
  if tmessage[3] then
    X = tonumber(utils.split(tmessage[3],"=")[2])
  else
    X = nil
  end
  if tmessage[4] then
    Y = tonumber(utils.split(tmessage[4],"=")[2])
  else
    Y = nil
  end
  call_callback('ROOMID', id, name, X, Y)
  RoomID = id
  if (not name) or (name == "Bitte") then
    return
  end
  if (name == RoomName) and (hmusic ~= nil) and (hmusic:IsActive() == Audio.CONST.active.playing) then
    return
  end
  RoomName = name
  if hmusic ~= nil then
    hmusic:Stop()
  end
  if (not Path.isfile(GetInfo(74).."Music/"..name..".ogg") and not Path.isdir(GetInfo(74).."Music/"..name)) then
    return
  end
  if (Path.isfile(GetInfo(74).."Music/"..name..".ogg")) then
    hmusic = Sound.PlayMusic(name .. ".ogg")
  else
    files=Dir.getfiles(GetInfo(74).."Music/"..name)
    hmusic = Sound.PlayMusic(files[math.random(1,#files)])
  end
end 

OnAvalonLevel = function(type, message)
  local level = string.match(message, "^S(%d+)$")
  if not level then
    return
  end
  level = tonumber(level)
  if (PlayerLevel ~= nil) and (level > PlayerLevel) then
    Sound.PlaySound("Misc/LevelUp.ogg")
  end
  PlayerLevel = level
end

OnAvalonEP = function(type, message)
  local ep = string.match(message, "^(%d+)")
  if not ep then
    return
  end
  PlayerEP = tonumber(ep)
end

OnAvalonTP = function(message, ntp)
  ntp = tonumber(ntp)

  if ntp < 0 then
    ntp = 0
  end

  --combat_music()
  call_callback('TP', ntp)
end

OnAvalonSP=function(message, nsp)
  nsp = tonumber(nsp)
  call_callback('SP', nsp)
end

OnAvalonMP=function(message,nmp)
  nmp=tonumber(nmp)
  call_callback('MP', nmp)
end

OnAvalonAP = function(message, nap)
  nap = tonumber(nap)
  call_callback('AP', nap)
end

OnAvalonMaxTP=function(message,value)
  value=tonumber(value)
  call_callback('MAXTP', value)
  --combat_music()
end

OnAvalonMaxSP=function(message,value)
  value=tonumber(value)
  call_callback('MAXSP', value)
end

OnAvalonMaxAP=function(message,value)
  value=tonumber(value)
  call_callback('MAXAP', value)
end

function OnPluginInstall()

  Sound.Init()

  local ctbl = Ini.read('config.dat')
  if ctbl then
    for name, section in pairs(ctbl) do
      for optionname, optionvalue in pairs(section) do
        config = tonumber(optionvalue)
        if (config == nil) then
          config = optionvalue
        end
        if configtbl[name]==nil then
          configtbl[name]={}
        end
        configtbl[name][optionname] = config
      end
    end
  end
  if configtbl.settings.MXP==1 then
    config_graphics(true,true)
  else
    config_graphics(false,true)
  end
  Spells.ParseWarnings(configtbl.settings.Warnings)
  NumpadInit()

  atcp = PPI.Load("7c08e2961c5e20e5bdbf7fc5")

  if not atcp then
    error("ATCP konnte nicht initialisiert werden.")
  end

  atcp.Listen("Avalon.TP", OnAvalonTP)
  atcp.Listen("Avalon.SP", OnAvalonSP)
  atcp.Listen("Avalon.AP", OnAvalonAP)
  atcp.Listen("Avalon.MP", OnAvalonMP)
  atcp.Listen("Avalon.MAXTP",OnAvalonMaxTP)
  atcp.Listen("Avalon.MAXSP",OnAvalonMaxSP)
  atcp.Listen("Avalon.MAXAP",OnAvalonMaxAP)
  atcp.Listen('Avalon.Level', OnAvalonLevel)
  atcp.Listen("Avalon.EP", OnAvalonEP)
  atcp.Listen('Avalon.RoomID', OnAvalonRoomID)
  atcp.Listen('Avalon.Channel', OnAvalonChannel)
  atcp.Listen('Avalon.Dunkel', OnAvalonDunkel)
  atcp.Listen('Avalon.Kampf', OnAvalonKampf)
  atcp.Listen('Avalon.Getoetet', OnAvalonGetoetet)
  atcp.Listen('Avalon.GruppeGetoetet', OnAvalonGetoetet)
  atcp.Listen('Avalon.Gilde',OnAvalonGilde)
  atcp.Listen('Avalon.RComm',OnAvalonChannel)
  atcp.Listen('Avalon.Comm',OnAvalonComm)
  atcp.Listen('Avalon.Soul',OnAvalonSoul)
  atcp.Listen('Avalon.RSoul',OnAvalonRSoul)
  atcp.Listen('Avalon.GrafikVermeiden',OnAvalonGrafikVermeiden)

  if configtbl.settings.FirstRun == 1 then
    res = utils.msgbox("Herzlichen Glueckwunsch! das Avalon-Soundpack ist nun bereit. Informationen zu Funktionen und Tastenkombinationen stehen in der Readme-Datei. Die Datei jetzt im Editor anzeigen?","Avalon-Soundpack - Readme-Datei","yesno","!",1)
    if (res == "yes") then
      os.execute("notepad.exe readme_soundpack.txt")
    end
  end
  configtbl.settings.FirstRun = 0
  newfiles=Dir.getfiles(world.GetInfo(66),"*\\.new")
  if #newfiles>0 then
    for _, dfile in pairs(newfiles) do
      File.delete(string.sub(dfile,1,-5))
      File.move(dfile,string.sub(dfile,1,-5))
    end
    world.Note("Das letzte Update wurde nun erfolgreich abgeschlossen.")
  end
  world.SetOption ("omit_date_from_save_files", 1)

  -- redraw all miniwindows (important for visual sub-plugins)
  world.AddTimer("RedrawWindows", 0, 0, 0.5, "", timer_flag.Enabled, "world.Redraw")

  PPI.Expose('IID',
    function()
      if Dunkel==1 then
        return nil
      else
        return RoomID
      end
    end)
  PPI.Expose('Level',
    function()
      return PlayerLevel
    end)

  PPI.Expose('EP', function()
    return PlayerEP
  end)

  PPI.Expose('AP',
    function()
      return g_ap, g_max_ap
    end)
  PPI.Expose('MP',
    function()
      return g_mp, g_max_mp
    end)
  PPI.Expose('SP',
    function()
      return g_sp, g_max_sp
    end)
  PPI.Expose('TP',
    function()
      return g_tp, g_max_tp
    end)
  PPI.Expose('GetConfig',
    function(table,key)
      if configtbl[table]==nil then
        return nil
      end
      return configtbl[table][key]
    end)
  PPI.Expose('SetConfig',
    function(table,key,value)
      if configtbl[table]==nil then
        configtbl[table]={}
      end
      configtbl[table][key]=value
    end)
  PPI.Expose('HookCallback',
    function(event,callback)
      return hook_callback(event,callback)
    end)
  PPI.Expose('UnhookCallback',
    function(event, callback)
      return unhook_callback(event, callback)
    end)
  PPI.Expose('PSND',
    Sound.PlaySound)
  PPI.Expose("NoteColour",
    NoteColour)

  Player:Init()
  Gilden.Init()
end

function OnPluginClose()
  call_callback('CLOSE')
  configtbl.settings.Warnings=Spells.RetrieveWarnings()
  Ini.write('config.dat', configtbl)
end

OnPluginListChanged = function()

  if Timers == nil then

    Timers = PPI.Load(world.GetPluginVariable("", "timers"))

  end
end

function volume(value)
  if (volumetype == 1) then
    if (configtbl.settings.SoundVolume+value > 100) or (configtbl.settings.SoundVolume+value < 0) then
      return
    end
    configtbl.settings.SoundVolume = configtbl.settings.SoundVolume + value
    Sound.PlaySound("Misc/VolumeSwitch.ogg")
    world.Note("Sound-Lautstrke: "..tostring(configtbl.settings.SoundVolume).." %")
  elseif (volumetype == 2) then
    if (configtbl.settings.MusicVolume+value > 100) or (configtbl.settings.MusicVolume + value < 0) then
      return
    end
    configtbl.settings.MusicVolume = configtbl.settings.MusicVolume + value
    Sound.PlaySound("Misc/VolumeSwitch.ogg")
    if (hmusic) and (hmusic:IsActive() == Audio.CONST.active.playing) then
      hmusic:SetAttribute(Audio.CONST.attribute.volume, configtbl.settings.MusicVolume/100)
    end
    world.Note("Hintergrund-Musik-Lautstrke: "..tostring(configtbl.settings.MusicVolume).." %")
  else
    if (configtbl.settings.CombatMusicVolume+value > 100) or (configtbl.settings.CombatMusicVolume + value < 0) then
      return
    end
    configtbl.settings.CombatMusicVolume = configtbl.settings.CombatMusicVolume + value
    Sound.PlaySound("Misc/VolumeSwitch.ogg")
    if (g_combat_music) and (g_combat_music:IsActive() == Audio.CONST.active.playing) then
      g_combat_music:SetAttribute(Audio.CONST.attribute.volume, configtbl.settings.CombatMusicVolume/100)
    end
    world.Note("Kampf-Musik-Lautstrke: "..tostring(configtbl.settings.CombatMusicVolume).." %")
  end
end

function volumetype_switch()
  if (volumetype == 1) then
    volumetype = 2
    world.Note("Lautstrkeregelung fr Hintergrund-Musik.")
  elseif (volumetype == 2) then
    volumetype = 3
    world.Note("Lautstrkeregelung fr Kampf-Musik.")
  else    
    volumetype = 1
    world.Note("Lautstrkeregelung fr Sounds.")
  end
  Sound.PlaySound('Misc/ConfigSwitch.ogg')
end

function tpbar_switch()
  if (configtbl.settings.TPBar == 1) then
    configtbl.settings.TPBar = 0
    world.Note("TP-Ausgabe ausgeschaltet.")
  else
    configtbl.settings.TPBar = 1
    world.Note("TP-Ausgabe eingeschaltet.")
  end
  Sound.PlaySound("Misc/ConfigSwitch.ogg")
end

function apbar_switch()
  if (configtbl.settings.APBar == 1) then
    configtbl.settings.APBar = 0
    world.Note("AP-Ausgabe ausgeschaltet.")
  else
    configtbl.settings.APBar = 1
    world.Note("AP-Ausgabe eingeschaltet.")
  end
  Sound.PlaySound("Misc/ConfigSwitch.ogg")
end

function spbar_switch()
  if (configtbl.settings.SPBar == 1) then
    configtbl.settings.SPBar = 0
    world.Note("ZP-Ausgabe ausgeschaltet.")
  else
    configtbl.settings.SPBar = 1
    world.Note("ZP-Ausgabe eingeschaltet.")
  end
  Sound.PlaySound("Misc/ConfigSwitch.ogg")
end

function OnPluginDisconnect()
  g_tp = nil
  g_max_tp = nil
  g_sp = nil
  g_max_sp = nil
  g_ap = nil
  g_max_ap = nil
  apfullannounced = false
  tpfullannounced = false
  spfullannounced = false
  hapsnd = nil
  hspnil = 0
  htpsnd = nil
  PlayerLevel = nil
  RoomName = ""

  if hmusic ~= nil then
    hmusic:Stop()
    hmusic = nil
  end

  call_callback('LOGOUT')
end

function switch_mute()
  if (volumetype == 1) then
    if (configtbl.settings.SoundsMuted == 0) then
      configtbl.settings.SoundsMuted = 1
      world.Note("Sounds ausgeschaltet.")
    else
      configtbl.settings.SoundsMuted = 0
      world.Note("Sounds eingeschaltet.")
    end
  elseif (volumetype == 2) then
    if (configtbl.settings.MusicMuted == 0) then
      configtbl.settings.MusicMuted = 1

      if hmusic ~= nil then
        hmusic:Stop()
      end

      RoomName = ""
      world.Note("Hintergrund-Musik ausgeschaltet.")
    else
      configtbl.settings.MusicMuted = 0
      atcp.Send('ava_req_mapper')
      world.Note("Hintergrund-Musik eingeschaltet.")
    end
  else
    if (configtbl.settings.CombatMusicMuted == 0) then
      configtbl.settings.CombatMusicMuted = 1

      if g_combat_music ~= nil then
        g_combat_music:Stop()
      end

      world.Note("Kampf-Musik ausgeschaltet.")
    else
      configtbl.settings.CombatMusicMuted = 0
      world.Note("Kampf-Musik eingeschaltet.")
    end
  end
  Sound.PlaySound('Misc/ConfigSwitch.ogg')
end

function switch_fullmute()
  if (configtbl.settings.SoundsMuted == 0) then
    configtbl.settings.SoundsMuted = 1
    world.Note("Sounds ausgeschaltet.")
  else
    configtbl.settings.SoundsMuted = 0
    world.Note("Sounds eingeschaltet.")
  end
  if (configtbl.settings.MusicMuted == 0) then
    configtbl.settings.MusicMuted = 1

    if hmusic ~= nil then
      hmusic:Stop()
    end

    RoomName = ""
    world.Note("Hintergrund-Musik ausgeschaltet.")
  else
    configtbl.settings.MusicMuted = 0
    atcp.Send('ava_req_mapper')
    world.Note("Hintergrund-Musik eingeschaltet.")
  end
  if (configtbl.settings.CombatMusicMuted == 0) then
    configtbl.settings.CombatMusicMuted = 1

    if g_combat_music ~= nil then
      g_combat_music:Stop()
    end

    world.Note("Kampf-Musik ausgeschaltet.")
  else
    configtbl.settings.CombatMusicMuted = 0
    world.Note("Kampf-Musik eingeschaltet.")
  end
  Sound.PlaySound('Misc/ConfigSwitch.ogg')
end

function print_position()
  if (Dunkel == 1) then
    world.Note("Fr diesen Raum konnten keine Informationen abgerufen werden, da es hier derzeit dunkel ist.")
    return
  end
  world.Note("Ort:\t"..RoomName)
  if (X and Y) then
    world.Note("Pos:\tX: "..tostring(X)..", Y: "..tostring(Y))
  end
end

function rgbtohex(r, g, b)
  return r + (g * 256) + (b * 65536)
end

function NoteColour(text, rt, gt, bt, rb, gb, bb, style)
  if not rt then
    rt = 255
  end
  if not gt then
    gt = 255
  end
  if not bt then
    bt = 255
  end
  if not rb then
    rb = 0
  end
  if not gb then
    gb = 0
  end
  if not bb then
    bb = 0
  end
  world.NoteColourRGB(rgbtohex(rt, gt, bt), rgbtohex(rb, gb, bb))
  if style then
    world.NoteStyle(style)
  end
  world.Note(text)
  if style then
    world.NoteStyle(0)
  end
  world.NoteColourRGB(rgbtohex(255, 255, 255), 0)
end

function combat_music()
  if g_combat == nil or g_combat == false then

    if g_combat_music ~= nil then
      g_combat_music:Stop()
      g_combat_music = nil
    end

    if hmusic ~= nil and hmusic:IsActive() ~= Audio.CONST.active.playing then
      hmusic:Play()
    end
    return
  end

  if g_tp == nil or g_max_tp == nil or configtbl.settings.CombatMusicMuted == 1 then
    return
  end

  local percentage = g_tp * 100 / g_max_tp

  if percentage >= 86 then
    music = "excellent.ogg"
  elseif percentage >= 72 then
    music = "scratches.ogg"
  elseif percentage >= 58 then
    music = "small wounds.ogg"
  elseif percentage >= 42 then
    music = "quite a few.ogg"
  elseif percentage >= 28 then
    music = "big nasty.ogg"
  elseif percentage >= 14 then
    music = "pretty hurt.ogg"
  elseif percentage >= 0 then
    music = "awful.ogg"
  end

  if g_combat_music_name == nil or music ~= g_combat_music_name then
    g_combat_music_name = music

    if g_combat_music ~= nil then
      g_combat_music:Stop()
    end
  end
  if g_combat_music == nil or g_combat_music:IsActive() ~= Audio.CONST.active.playing then
    if (hmusic) and (hmusic:IsActive() == Audio.CONST.active.playing) then
      hmusic:Pause()
    end
    g_combat_music = Sound.PlayMusic(GetInfo(74) .. "Music/Combat/" .. g_combat_music_name, configtbl.settings.CombatMusicVolume, configtbl.settings.CombatMusicMuted)
  end
end

function warnings_access(warn)
  if warn=='' then
    Spells.PrintWarnings()
  else
    Spells.ToggleWarning(warn)
  end
end

function GetUnixTime()
  world.CallPlugin(world.GetPluginVariable("", "time"), "time", "")
  rtime = world.GetPluginVariable(world.GetPluginVariable("", "time"), "UnixTime")
  rtime = world.Replace(rtime, ",", ".", false)
  return tonumber(rtime)
end

function NumpadInit()

  if configtbl.settings.NumpadWalk > 2 then
    -- frueher gab es mal noch Klettern und Schwimmen
    -- wird inzwischen automatisch vom Soundpack gemacht
    configtbl.settings.NumpadWalk = 0
  end

  if configtbl.settings.NumpadWalk==0 then
    world.AcceleratorTo('Numpad1','send_command("sw")', sendto.script)
    world.AcceleratorTo('Numpad2','send_command("s")', sendto.script)
    world.AcceleratorTo('Numpad3','send_command("so")', sendto.script)
    world.AcceleratorTo('Numpad4','send_command("w")', sendto.script)
    world.AcceleratorTo('Numpad6','send_command("o")', sendto.script)
    world.AcceleratorTo('Numpad7','send_command("nw")', sendto.script)
    world.AcceleratorTo('Numpad8','send_command("n")', sendto.script)
    world.AcceleratorTo('Numpad9','send_command("no")', sendto.script)
    world.AcceleratorTo('Add','send_command("r")', sendto.script)
    world.AcceleratorTo('Subtract','send_command("h")', sendto.script)
  elseif configtbl.settings.NumpadWalk==2 then
    world.Accelerator('Numpad1','spaehe kurz sw')
    world.Accelerator('Numpad2','spaehe kurz s')
    world.Accelerator('Numpad3','spaehe kurz so')
    world.Accelerator('Numpad4','spaehe kurz w')
    world.Accelerator('Numpad6','spaehe kurz o')
    world.Accelerator('Numpad7','spaehe kurz nw')
    world.Accelerator('Numpad8','spaehe kurz n')
    world.Accelerator('Numpad9','spaehe kurz no')
    world.Accelerator('Add','spaehe kurz h')
    world.Accelerator('Subtract','spaehe kurz r')
  elseif configtbl.settings.NumpadWalk==1 then
    world.Accelerator('Numpad1','spaehe sw')
    world.Accelerator('Numpad2','spaehe s')
    world.Accelerator('Numpad3','spaehe so')
    world.Accelerator('Numpad4','spaehe w')
    world.Accelerator('Numpad6','spaehe o')
    world.Accelerator('Numpad7','spaehe nw')
    world.Accelerator('Numpad8','spaehe n')
    world.Accelerator('Numpad9','spaehe no')
    world.Accelerator('Add','spaehe h')
    world.Accelerator('Subtract','spaehe r')
  end
end

function NumpadSwitch()
  if configtbl.settings.NumpadWalk==1 then
    configtbl.settings.NumpadWalk=2
    world.Note('Nummernblock auf kurzes Sphen konfiguriert')
    Sound.PlaySound("Misc/NumPadScoutShort.ogg")
  elseif configtbl.settings.NumpadWalk==2 then
    configtbl.settings.NumpadWalk=0
    world.Note('Nummernblock auf Laufen konfiguriert')
    Sound.PlaySound("Misc/NumPadWalk.ogg")
  elseif configtbl.settings.NumpadWalk==0 then
    configtbl.settings.NumpadWalk=1
    world.Note('Nummernblock auf langes Sphen konfiguriert')
    Sound.PlaySound("Misc/NumPadScoutLong.ogg")
  end
  NumpadInit()
end

function config_graphics(enable,omit_output)
  omit_output=omit_output or false
  if enable then
    if tonumber(world.GetOption("use_mxp"))==2 then
      return
    end
    world.SetOption("use_mxp",2)
    configtbl.settings.MXP=1
    if not omit_output and not mxp_output then
      world.Note("MXP ist nun aktiviert, wird von Avalon allerdings noch nicht gesendet. Um MXP korrekt verwenden zu knnen, muss der Client erst neu gestartet werden.")
      mxp_output=true
    end
  else
    if tonumber(world.GetOption("use_mxp"))==3 then
      return
    end
    world.SetOption("use_mxp",3)
    configtbl.settings.MXP=0
    if not omit_output and not mxp_output then
      world.Note("MXP ist nun deaktiviert. Damit der Text allerdings ohne strende Zeichen angezeigt werden kann, muss der Client einmalig neu gestartet werden.")
mxp_output=true
    end
  end
end

function hook_callback(event,callback)
  if not callbacktbl[event] then
    callbacktbl[event]={}
  end
  if Tablex.find(callbacktbl[event],callback) ~=nil then
    return false
  end
  callbacktbl[event][#(callbacktbl[event])+1]=callback
  return true
end

function unhook_callback(event,callback)
  if callbacktbl[event]==nil then
    return false
  end
  index=Tablex.find(callbacktbl[event],callback)
  if index ~=nil then
    callbacktbl[event]=Tablex.removevalues(callbacktbl[event],index,index)
    return true
  end
  return false
end

function OnPluginCommandEntered(text)
  if (configtbl.settings.RepeatCommand == 0) then
    return text
  end

   if (text == "") and (LastCommand ~= nil) then
    return LastCommand
  else
    if (text ==" ") then
      LastCommand = ''
      return ''
    end
    LastCommand = text
    return text
  end
end

function repeatcommand_switch()
  if (configtbl.settings.RepeatCommand == 1) then
    LastCommand=nil
    configtbl.settings.RepeatCommand = 0
    world.Note("Letztes Kommando mit Enter wiederholen ausgeschaltet.")
  else
    configtbl.settings.RepeatCommand = 1
    world.Note("Letztes Kommando mit Enter wiederholen eingeschaltet.")
  end
  Sound.PlaySound("Misc/ConfigSwitch.ogg")
end

function call_callback(handle, ...)
  if callbacktbl[handle] ~= nil then
    for ci,cf in pairs(callbacktbl[handle]) do
      cf(unpack({select(1, ...)}))
    end
  end
end

function say_stat(type)
  if type == "AP" then
    current = g_ap
    max = g_max_ap
  elseif type == "MP" then
    current = g_mp
    max = g_max_mp
  elseif type == "TP" then
    current = g_tp
    max = g_max_tp
  elseif type == "ZP" then
    current = g_sp
    max = g_max_sp
  end
  if current == nil or max == nil then
    world.Note("Unbekannt")
  else
    world.Note(current .. " von " .. max .. " " .. type)
  end
end

function open_door(name, line, wildcards)
  local i,text 

  for i=1, #wildcards do
    if wildcards[i] ~= "" then
    text = wildcards[i]
    end
  end
  world.Execute("oeffne "..text)
end

-- sends a command and stores it within the command window
function send_command(cmd)

  local current = world.GetCommand()

  if current ~= "" then
    world.PushCommand()
  end

  world.SendPush(cmd)

  if current ~= "" then
    world.SetCommand(current)
  end  
end

function OnPluginPlaySound(file)
  Sound.PlaySound(file)
end
]]>
</script>


</muclient>
